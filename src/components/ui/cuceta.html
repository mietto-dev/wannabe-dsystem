<!DOCTYPE
    HTML
    PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/transitional.dtd"
>
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta
        http-equiv="Content-Type"
        content="text/html; charset=Utf-8"
    />
    <meta
        http-equiv="X-UA-Compatible"
        content="IE=edge"
    >
    <link
        rel="shortcut icon"
        href="/img/favicon.ico"
    />
    <title>&#70;&#54;&#55;&#48;&#76;</title>

    <script
        type="text/javascript"
        src="jquery/jquery.min.js"
    ></script>
    <!--[if lte IE 8]>
<script type="text/javascript" src="jquery/jquery-3.0.0-alpha1-compat.min.js"></script>
<![endif]-->
    <script
        type="text/javascript"
        src="jquery/crypto-js.min.js"
    ></script>
    <script
        type="text/javascript"
        src="jquery/jsencrypt.min.js"
    ></script>
    <script
        type="text/javascript"
        src="jquery/common_lib.js"
    ></script>
    <script type="text/javascript">
        function StatusOfLRBtnOf3MenuHandle(nowScrollLocation) {
            if (nowScrollLocation == "") {
                nowScrollLocation = 0;
            }
            var class3MenuContainerWidth = $("#class3MenuMainContent").width();
            var totalTabWidth = $("#_totalTabWidth").val();
            if (nowScrollLocation >= (totalTabWidth - class3MenuContainerWidth)) {
                $("#scrollRightBtn").attr("class", "scrollRightBtnDisable");
                $("#scrollLeftBtn").attr("class", "scrollLeftBtn EnableScrollBtn");
            }
            else if (nowScrollLocation == 0) {
                $("#scrollLeftBtn").attr("class", "scrollLeftBtnDisable");
                $("#scrollRightBtn").attr("class", "scrollRightBtn EnableScrollBtn");
            }
            else {
                $("#scrollRightBtn").attr("class", "scrollRightBtn EnableScrollBtn");
                $("#scrollLeftBtn").attr("class", "scrollLeftBtn EnableScrollBtn");
            }
        }
        function Menu3TabStyleHandle() {
            var class3MenuContainer = $("#class3MenuMainContent");
            var ContainerWidth = $("#commRight").width() - $("#scrollLeftBtn").width()
                - $("#scrollRightBtn").width();
            class3MenuContainer.width(ContainerWidth);
            var tabTotalWidth = 0;
            var tab = $("li", class3MenuContainer);
            for (var i = 0; i < tab.length; i++) {
                var LiWidth = parseInt(tab[i].offsetWidth);
                tabTotalWidth = tabTotalWidth + LiWidth;
            }
            $("#_totalTabWidth").val(tabTotalWidth);
            var class3MenuUl = $("ul", class3MenuContainer);
            if (tabTotalWidth > ContainerWidth) {
                class3MenuUl.css("width", 5000);
                $("#scrollLeftBtn,#scrollRightBtn").addClass("EnableScrollBtn");
                var nowScrollLocation = $("#_Menu3Location").text();
                if ((tabTotalWidth - ContainerWidth) < nowScrollLocation) {
                    nowScrollLocation = tabTotalWidth - ContainerWidth;
                }
                class3MenuContainer.scrollLeft(nowScrollLocation);
                StatusOfLRBtnOf3MenuHandle(nowScrollLocation);
            }
            else {
                $("#scrollLeftBtn").removeClass("scrollLeftBtn");
                $("#scrollRightBtn").removeClass("scrollRightBtn");
            }
        }
        function MenuItemClass(menuItemJSON) {
            this.menuItemJSON = menuItemJSON;
        }
        MenuItemClass.prototype.findMenu = function (menuid) {
            var menuItemJSON = this.menuItemJSON;
            var menuItemId = menuItemJSON.id;
            if (menuItemId == menuid) {
                return menuItemJSON;
            }
            var children = menuItemJSON.children;
            if (!children) {
                return null;
            }
            for (var i = 0; i < children.length; i++) {
                var childItem = children[i];
                var childID = childItem.id;
                if (menuid == childID) {
                    return childItem;
                }
                if (childItem.children) {
                    var childObj = new MenuItemClass(childItem);
                    var targetMenu = childObj.findMenu(menuid);
                    if (targetMenu) {
                        return targetMenu;
                    }
                }
            }
            return null;
        };
        MenuItemClass.prototype.getLeftMostPageJSON = function () {
            var menuItemJSON = this.menuItemJSON;
            var menuItemId = menuItemJSON;
            var children = menuItemJSON.children;
            if (!children) {
                return menuItemJSON;
            }
            var leftMostSon = children[0];
            var menuObj = new MenuItemClass(leftMostSon);
            return menuObj.getLeftMostPageJSON();
        };
        function MenuTreeClass(menuTreeJSON) {
            this.menuTreeJSON = menuTreeJSON;
        }
        MenuTreeClass.prototype.findMenu = function (menuid) {
            var menuTreeJSON = this.menuTreeJSON;
            for (var i = 0; i < menuTreeJSON.length; i++) {
                var menu1table = menuTreeJSON[i];
                var menu1Obj = new MenuItemClass(menu1table);
                var targetMenu = menu1Obj.findMenu(menuid);
                if (targetMenu) {
                    return targetMenu;
                }
            }
            return null;
        };
        function GetLeftMostPageID(menuid) {
            var menuTable = menuTreeObj.findMenu(menuid);
            var menuObj = new MenuItemClass(menuTable);
            var pageJSON = menuObj.getLeftMostPageJSON();
            return pageJSON.id;
        }
        function Class3MenuShow(selectPageID, selectSupId, selectMidId, selectThdId) {
            if (selectThdId == "") {
                $("#class3Menu").css("display", "none");
                return;
            }
            var class2MenuNode = menuTreeObj.findMenu(selectMidId);
            var class3MenuJSON = class2MenuNode.children;
            var class3MenuContent = "";
            for (var index in class3MenuJSON) {
                var menu = class3MenuJSON[index];
                var class3MenuID = menu.id;
                var class3MenuName = menu.name;
                if (class3MenuID == selectThdId) {
                    AEleMenu3Class = "AEleMenu3Selected";
                }
                else {
                    AEleMenu3Class = "AEleMenu3";
                }
                class3MenuContent = class3MenuContent
                    + "<li><p class='" + AEleMenu3Class + "'"
                    + "MenuClass='3'"
                    + "id='" + class3MenuID + "'"
                    + "MenuPage='" + GetLeftMostPageID(class3MenuID) + "'"
                    + "href='#" + class3MenuID + "'>"
                    + class3MenuName
                    + "</p></li>";
            }
            $("#class3MenuMainContent ul").html(class3MenuContent);
            $("#class3MenuMainContent ul li p").click(function () {
                var MenuOBJ = $(this);
                if (!checkDisClickAttr(MenuOBJ)) {
                    return;
                }
                AjaxQuery_ClassMenuClick(MenuOBJ);
            });
            Menu3TabStyleHandle();
            $(window).resize(function () {
                Menu3TabStyleHandle();
            });
            $("#scrollRightBtn,#scrollLeftBtn").click(function () {
                if (!$(this).hasClass("EnableScrollBtn")) {
                    consoleLog("no scroll button!!");
                    return;
                }
                var scrollTarget = $("#class3MenuMainContent");
                var tabWidth = $("#_totalTabWidth").val();
                var srcollTotalLen = tabWidth - scrollTarget.width();
                if ($(this).attr("id") == "scrollLeftBtn") {
                    scrollTarget.scrollLeft(0);
                }
                else {
                    scrollTarget.scrollLeft(srcollTotalLen);
                }
                var afterPosition = scrollTarget.scrollLeft();
                StatusOfLRBtnOf3MenuHandle(afterPosition);
            });
        }
        function Class2MenuShow(selectPageID, selectSupId, selectMidId) {
            if (selectMidId == "") {
                return;
            }
            var class1MenuNode = menuTreeObj.findMenu(selectSupId);
            var class2MenuJSON = class1MenuNode.children;
            var class2MenuContent = "";
            var class2MenuClass = "";
            for (var index in class2MenuJSON) {
                var menu = class2MenuJSON[index];
                var class2MenuID = menu.id;
                var class2MenuName = menu.name;
                if (class2MenuID == selectMidId) {
                    class2MenuClass = "selectClass2Menu";
                }
                else {
                    class2MenuClass = "";
                }
                class2MenuContent = class2MenuContent
                    + "<li>"
                    + "<a class='" + class2MenuClass + "' "
                    + "href='javascript:void(0);' "
                    + "MenuClass='2' "
                    + "id='" + class2MenuID + "' "
                    + "MenuPage='" + GetLeftMostPageID(class2MenuID)
                    + "' title='" + class2MenuName
                    + "'>"
                    + class2MenuName
                    + "</a></li>";
            }
            $("#class2MenuItem").html(class2MenuContent);
            $("#class2MenuItem li a").click(function () {
                var MenuOBJ = $(this);
                if (!checkDisClickAttr(MenuOBJ)) {
                    return;
                }
                AjaxQuery_ClassMenuClick(MenuOBJ);
            });
        }
        function Class1MenuShow(selectPageID, selectSupId) {
            var FirstMenuContent = "<ul>";
            var SupClass = "";
            var SupLiID = "";
            var FirstOne = "yes";
            var navBarWidth = $("#mainNavigator").width();
            var leftPadWidth = $("#mn_first").width();
            var rightPadWidth = $("#mn_last").width();
            var menuAreaWidth = navBarWidth - leftPadWidth - rightPadWidth;
            menuAreaWidth -= 7;
            var menuWidth = menuAreaWidth / (menuTreeJSON.length);
            menuWidth = Math.floor(menuWidth);
            for (var index in menuTreeJSON) {
                var menu = menuTreeJSON[index];
                var supId = menu.id;
                var supName = menu.name;
                if (supId == selectSupId) {
                    SupClass = "SelectMenuItem";
                }
                else {
                    SupClass = "MenuItem";
                }
                if (FirstOne == "yes") {
                    SupLiID = "homeLi";
                    FirstOne = "no";
                }
                else {
                    SupLiID = "";
                }
                FirstMenuContent = FirstMenuContent
                    + "<li id=\"" + SupLiID + "\">"
                    + "<a href=\"javascript:void(0);\" class=\"" + SupClass
                    + "\" "
                    + "style='width:" + menuWidth + "px; text-overflow: ellipsis; overflow: hidden; white-space: nowrap;' "
                    + "MenuClass='1' "
                    + "id='" + supId + "' "
                    + "MenuPage='" + GetLeftMostPageID(supId) + "'"
                    + " title='" + supName + "'>"
                    + supName
                    + "</a></li>";
            }
            FirstMenuContent = FirstMenuContent + "</ul>";
            $("#mn_li").html(FirstMenuContent);
            $("#mn_li li a").click(function () {
                var MenuOBJ = $(this);
                if (!checkDisClickAttr(MenuOBJ)) {
                    return;
                }
                AjaxQuery_ClassMenuClick(MenuOBJ);
            });
        }
        function checkDisClickAttr(obj) {
            if ("off" == obj.attr("EnableClick")) {
                return false;
            }
            handleDisClickAttr("off");
            return true;
        }
        function handleDisClickAttr(ret) {
            var selectSupId = $("#_NowSupIdInfo", _MenuInfo).text();
            var selectMidId = $("#_NowMidIdInfo", _MenuInfo).text();
            var selectThdId = $("#_NowThdIdInfo", _MenuInfo).text();
            if (selectThdId) {
                var objs = [$("#" + selectSupId), $("#" + selectMidId), $("#" + selectThdId)];
            }
            else {
                if (selectMidId) {
                    var objs = [$("#" + selectSupId), $("#" + selectMidId)];
                }
                else {
                    var objs = [$("#" + selectSupId)];
                }
            }
            for (var i = 0; i < objs.length; i++) {
                if (objs[i].length > 0) {
                    objs[i].attr("EnableClick", ret);
                }
            }
        }
        function AjaxPageGet(PageName, MenuClass) {
            var pageContainer = $("#commPageContainer");
            pageContainer.succfunction = function (html) {
                pageContainer.html(html);
                var _MenuInfo = $("#_MenuInfo");
                var selectPageID = $("#_NextPageInfo", _MenuInfo).text();
                var selectSupId = $("#_NowSupIdInfo", _MenuInfo).text();
                var selectMidId = $("#_NowMidIdInfo", _MenuInfo).text();
                var selectThdId = $("#_NowThdIdInfo", _MenuInfo).text();
                if ("mmHome" == selectPageID) {
                    $(document).scrollTop(0);
                    return;
                }
                if (MenuClass == '1') {
                    Class1MenuShow(selectPageID, selectSupId);
                }
                Class2MenuShow(selectPageID, selectSupId, selectMidId);
                Class3MenuShow(selectPageID, selectSupId, selectMidId, selectThdId);
                $(document).scrollTop(0);
                handleDisClickAttr("on");
            };
            pageContainer.errorfunction = function () {
                consoleLog("page get fail");
                showWaitTip(false);
                pageContainer.html("Pedido da página falhou, por favor tente novamente!");
                handleDisClickAttr("on");
            };
            showWaitTip(true);
            pageContainer.dataTransfer(PageName, "GET", pageContainer.succfunction,
                pageContainer.errorfunction, false,
                undefined, 'html'
            );
        }
        function AjaxQuery_ClassMenuClick(MenuOBJ) {
            var MenuClass = MenuOBJ.attr("MenuClass");
            var page = MenuOBJ.attr("MenuPage");
            var scrollTarget = $("#class3MenuMainContent");
            var Menu3Location = scrollTarget.scrollLeft();
            var pageFile = "/?_type=menuView&_tag="
                + page + "&Menu3Location=0";
            if (MenuClass == 3) {
                pageFile = "/?_type=menuView&_tag="
                    + page + "&Menu3Location=" + Menu3Location;
            }
            AjaxPageGet(pageFile, MenuClass);
        }
        function openLink(pageurl) {
            var PageName = "/?_type=menuView&_tag=" + pageurl;
            AjaxPageGet(PageName, 1);
        }
        function MenuShow(Menuclass, selectPageID, selectSupId, selectMidId, selectThdId) {
            if (Menuclass == "ClassAll") {
                Class1MenuShow(selectPageID, selectSupId);
                Class2MenuShow(selectPageID, selectSupId, selectMidId);
                Class3MenuShow(selectPageID, selectSupId, selectMidId, selectThdId);
            }
            else if (Menuclass == "ClassOne") {
                Class1MenuShow(selectPageID, selectSupId);
            }
            else if (Menuclass == "ClassTwo") {
                Class2MenuShow(selectPageID, selectSupId);
            }
            else {
                consoleLog("[menu_api.lp][MenuShow]    Menuclass(" + Menuclass + "filling is not right!!");
            }
        }
        function FakeClass1MenuShow() {
            var FirstMenuContent = "<ul>";
            var SupClass = "MenuItem";
            var SupLiID = "";
            var FirstOne = "yes";
            var navBarWidth = $("#mainNavigator").width();
            var leftPadWidth = $("#mn_first").width();
            var rightPadWidth = $("#mn_last").width();
            var menuAreaWidth = navBarWidth - leftPadWidth - rightPadWidth;
            menuAreaWidth -= 7;
            var menuWidth = menuAreaWidth / (menuTreeJSON.length);
            menuWidth = Math.floor(menuWidth);
            for (var index in menuTreeJSON) {
                var menu = menuTreeJSON[index];
                var supId = menu.id;
                var supName = menu.name;
                if (FirstOne == "yes") {
                    SupLiID = "homeLi";
                    FirstOne = "no";
                }
                else {
                    SupLiID = "";
                }
                FirstMenuContent = FirstMenuContent
                    + "<li id=\"" + SupLiID + "\">"
                    + "<a href=\"javascript:void(0);\" class=\"" + SupClass
                    + "\" "
                    + "style='width:" + menuWidth + "px; text-overflow: ellipsis; overflow: hidden; white-space: nowrap; "
                    + "color:#BFBDBE; cursor:default;'"
                    + " hidefocus=\"true\" onclick=\" \" title=\"" + supName + "\">"
                    + supName
                    + "</a></li>";
            }
            FirstMenuContent = FirstMenuContent + "</ul>";
            $("#mn_li").html(FirstMenuContent);
        }
        function showWaitTip(show, TipMsg, StopTag) {
            var TipMsgTmp = TipMsg;
            if (show) {
                $("#blackMask,#tipLayer,#confirmBtnArea").css("display", "block");
                if (TipMsgTmp == undefined || TipMsgTmp == "") {
                    $("#waitingImgArea").css("display", "none");
                    if (true == StopTag) {
                        $("#confirmStop").css("display", "block");
                        $("#confirmCancel,#confirmOK").css("display", "none");
                    }
                    else {
                        $("#confirmStop").css("display", "none");
                        $("#confirmCancel,#confirmOK").css("display", "block");
                    }
                }
                else {
                    $("#confirmLayer, #waitingImgArea").css("display", "block");
                    $("#confirmMsg p").text(TipMsgTmp);
                    if (true == StopTag) {
                        $("#confirmStop").css("display", "block");
                        $("#confirmCancel,#confirmOK").css("display", "none");
                    }
                    else {
                        $("#confirmCancel,#confirmOK,#confirmStop").css("display", "none");
                    }
                }
                reposition_box("tipLayer");
            }
            else {
                $("#blackMask, #tipLayer, #confirmLayer").css("display", "none");
            }
        }
        function IniConfirm(msg) {
            showWaitTip(true);
            var confirmLayerOBJ = $("#confirmLayer");
            confirmLayerOBJ.css("display", "block");
            $("#confirmMsg p", confirmLayerOBJ).text(msg);
            $("#confirmCancel", confirmLayerOBJ).unbind("click");
            $("#confirmOK", confirmLayerOBJ).unbind("click");
            $("#confirmStop", confirmLayerOBJ).unbind("click");
            $("#confirmCancel", confirmLayerOBJ).bind("click", function (event) {
                showWaitTip(false);
            });
            $("#confirmCancel", confirmLayerOBJ).focus();
            return confirmLayerOBJ;
        }
        function IniTip(msg, infoType) {
            showWaitTip(true);
            var confirmLayerOBJ = $("#confirmLayer");
            $("#confirmCancel", confirmLayerOBJ).css("display", "none");
            confirmLayerOBJ.css("display", "block");
            if (infoType == "err") {
                $("#confirmMsg", confirmLayerOBJ).css("background", 'url("../img/err_m.png") no-repeat 20px 50%');
            }
            else if (infoType == "succ") {
                $("#confirmMsg", confirmLayerOBJ).css("background", 'url("../img/succ_m.png") no-repeat 20px 50%');
            }
            else {
                $("#confirmMsg", confirmLayerOBJ).css("background", 'url("../img/info_m.png") no-repeat 20px 50%');
            }
            $("#confirmMsg p", confirmLayerOBJ).text(msg);
            $("#confirmCancel", confirmLayerOBJ).unbind("click");
            $("#confirmOK", confirmLayerOBJ).unbind("click");
            $("#confirmStop", confirmLayerOBJ).unbind("click");
            $("#confirmOK", confirmLayerOBJ).bind("click", function (event) {
                showWaitTip(false);
                $("#confirmMsg", confirmLayerOBJ).css("background", 'url("../img/info_m.png") no-repeat 20px 50%');
            });
            $("#confirmOK", confirmLayerOBJ).focus();
            return confirmLayerOBJ;
        }
        function getStyle(obj, attr) {
            if (obj.currentStyle) {
                return obj.currentStyle[attr];
            }
            else {
                return document.defaultView.getComputedStyle(obj, null)[attr];
            }
        }
        function reposition_box(divId) {
            var box = document.getElementById(divId);
            if (null != box) {
                var boxObj = $("#" + divId);
                var winH = $(window).height();
                var winW = $(window).width();
                var divH = boxObj.height();
                var divW = boxObj.width();
                var h = (winH - divH) / 2;
                h = (h > 0) ? h : 5;
                var w = (winW - divW) / 2;
                w = (w > 0) ? w : 5;
                boxObj.css({ top: h, left: w });
                if (divH > winH || divW > winW) {
                    boxObj.css("position", "absolute");
                }
                else {
                    boxObj.css("position", "fixed");
                }
            }
        }
        $.validator.setDefaults({
            errorPlacement: function (error, element) {
                var tipHTML = "<div class=\"errorLabelWraper\"></div>";
                var tipObj = $(tipHTML);
                error.appendTo(tipObj);
                var rowObj = element.closest(".row");
                if (rowObj.length == 0) {
                    consoleLog("element id=[" + element.attr("id") + "] is not in row div.");
                    return;
                }
                var rowWidth = rowObj.width();
                var usedWidth = 0;
                var rightObj = undefined;
                rowObj.children().each(function () {
                    if (!($(this).hasClass("_LuQUID_AccessDeviceList") ||
                        $(this).hasClass("clear"))) {
                        usedWidth += $(this).outerWidth(true);
                    }
                    if ($(this).hasClass("right")) {
                        rightObj = $(this);
                    }
                });
                var errWidth = rowWidth - usedWidth;
                var widthtmp = errWidth - 5 - 23 - 10;
                if (widthtmp < 1) {
                    tipObj.removeAttr("style", "");
                }
                else {
                    tipObj.width(widthtmp);
                }
                if (rightObj != undefined) {
                    tipObj.insertAfter(rightObj);
                }
                else {
                    tipObj.appendTo(rowObj);
                }
            }
        });
        jQuery.extend(jQuery.validator.messages, {
            required: "Este campo é obrigatório. ",
            remote: "Por favor corrigir esse campo. ",
            email: "Por favor insira um endereço de e-mail válido. ",
            url: "Por favor, insira um URL válido. ",
            date: "Por favor insira uma data válida. ",
            dateISO: "Por favor, indique uma data válida (ISO). ",
            number: "Por favor insira um número válido. ",
            digits: "Digite um número inteiro. ",
            creditcard: "Por favor digite um número de cartão de crédito válido. ",
            equalTo: "Por favor entre com o mesmo valor novamente. ",
            maxlength: jQuery.validator.format("Por favor, indique não mais do que {0} caracteres. "),
            minlength: jQuery.validator.format("Por favor, insira pelo menos {0} caracteres. "),
            rangelength: jQuery.validator.format("Por favor insira um valor com {0} ~ {1} caracteres. "),
            range: jQuery.validator.format("Por favor insira um valor entre {0} e {1}. "),
            max: jQuery.validator.format("Por favor insira um valor menor ou igual a {0}. "),
            min: jQuery.validator.format("Por favor insira um valor maior ou igual a {0}. ")
        });
        function AsciiPasswordCheck(Key) {
            for (var j = 0; j < Key.length; j++) {
                var ch = Key.charCodeAt(j);
                if (ch == 9) {
                    return false;
                }
            }
            return true;
        }
        function AsciiCheck(Key) {
            for (var j = 0; j < Key.length; j++) {
                var ch = Key.charCodeAt(j);
                if (ch < 32 || ch > 126) {
                    return false;
                }
            }
            return true;
        }
        function AsciiCheckWithLen(Key, LenLimit) {
            if (Key.length != LenLimit) {
                return false;
            }
            if (false == AsciiCheck(Key)) {
                return false;
            }
            return true;
        }
        function HexCheck(Key) {
            for (var j = 0; j < Key.length; j++) {
                var ch = Key.charCodeAt(j);
                if (!((ch >= 65 && ch <= 70)
                    || (ch >= 97 && ch <= 102)
                    || (ch >= 48 && ch <= 57))) {
                    return false;
                }
            }
            return true;
        }
        function HexCheckWithLen(Key, LenLimit) {
            if (Key.length != LenLimit) {
                return false;
            }
            if (false == HexCheck(Key)) {
                return false;
            }
            return true;
        }
        function checkDomain(value) {
            var len = value.length;
            var firstChar = value.substr(0, 1);
            var lastChar = value.substr(len - 1, 1);
            var maxlen = 64;
            if (len > 64 || len < 1) {
                return false;
            }
            if (value.match("[^0-9a-zA-Z.-]") != null) {
                return false;
            }
            if (firstChar.match("[^0-9a-zA-Z]") != null) {
                return false;
            }
            if (lastChar.match("[^0-9a-zA-Z]") != null) {
                return false;
            }
            var pos = value.lastIndexOf(".");
            if (pos == -1) {
                var str = value;
                var templen = value.length;
                for (var i = 0; i < len; i++) {
                    var tempvalue = str.substring(i, i + 1);
                    if (isNaN(parseInt(tempvalue))) {
                        return true;
                    }
                }
                return false;
            }
            else {
                var str = value.substr(pos + 1);
                var tmplen = value.length - (pos + 1);
                for (var i = 0; i < tmplen; i++) {
                    var tmpvalue = str.substring(i, i + 1);
                    if (isNaN(parseInt(tmpvalue))) {
                        return true;
                    }
                }
                return false;
            }
        }
        function checkIPv4Addr(ipaddr) {
            var re = /^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/;
            if (re.test(ipaddr) == true) {
                var parts = ipaddr.split(".");
                for (var i = 0; i < parts.length; i++) {
                    if (parts[i].indexOf("0") == 0 && parts[i].length > 1)
                        return false;
                    if (parseInt((parts[i]), 10) > 255 || parseInt((parts[i]), 10) < 0) {
                        return false;
                    }
                }
                return true;
            }
            return false;
        }
        function checkIPv6Addr(ipaddr) {
            if (ipaddr.match("[^0-9a-fA-F:.]") != null)
                return false;
            var addrParts = ipaddr.split(':');
            var Doublecolon = ipaddr.split('::');
            var ipv4Parts = ipaddr.split('.');
            if (addrParts.length < 3 || addrParts.length > 8) {
                return false;
            }
            else if (Doublecolon.length == 1 && ipv4Parts.length == 1 && addrParts.length != 8) {
                return false;
            }
            else if (Doublecolon.length == 1 && ipv4Parts.length > 1 && addrParts.length != 6) {
                return false;
            }
            else if (Doublecolon.length > 1 && ipv4Parts.length > 1 && addrParts.length > 6) {
                return false;
            }
            else if (Doublecolon.length > 2 || ipaddr.split(':::').length > 1) {
                return false;
            }
            else {
                if (addrParts[0] == "" && addrParts[1] != "") {
                    return false;
                }
                for (var i = 0; i < addrParts.length; i++) {
                    if (i == addrParts.length - 1 && addrParts[i] == "" && addrParts[i - 1] != "") {
                        return false;
                    }
                    if (addrParts[i].length > 4 && addrParts[i].split('.').length < 2) {
                        return false;
                    }
                }
            }
            var pos = ipaddr.lastIndexOf(":");
            var ipv4Parts = ipaddr.split('.');
            if (ipv4Parts.length > 1) {
                var ipv4 = ipaddr.substring(pos + 1, ipaddr.length);
                if (false == checkIPv4Addr(ipv4)) {
                    return false;
                }
            }
            return true;
        }
        function checkMacAddr(macaddr) {
            var regSingleByte = new RegExp(":", "g");
            var regexp = /^([A-Fa-f0-9]{2}-){5}[A-Fa-f0-9]{2}$/;
            macaddr = macaddr.replace(regSingleByte, "-");
            if (!regexp.test(macaddr)) {
                return false;
            }
            return true;
        }
        jQuery.validator.addMethod(
            "macAddr",
            function (value, element, params) {
                if (this.optional(element)) {
                    return "dependency-mismatch";
                }
                if (checkMacAddr(value) == true) {
                    return true;
                }
                return false;
            },
            "Insira um endereço MAC válido. "
        );
        jQuery.validator.addMethod(
            "IPv4Addr",
            function (value, element, params) {
                if (this.optional(element)) {
                    return "dependency-mismatch";
                }
                if (checkIPv4Addr(value) == true) {
                    return true;
                }
                return false;
            },
            "Insira um endereço IPv4 válido. "
        );
        jQuery.validator.addMethod(
            "IPv6Addr",
            function (value, element, params) {
                if (this.optional(element)) {
                    return "dependency-mismatch";
                }
                return checkIPv6Addr(value);
            },
            "Insira um endereço IPv6 válido. "
        );
        jQuery.validator.addMethod(
            "DomainName",
            function (value, element, params) {
                if (this.optional(element)) {
                    return "dependency-mismatch";
                }
                return checkDomain(value);
            },
            "Por favor insira um nome de domínio válido. "
        );
        jQuery.validator.addMethod(
            "HostName",
            function (value, element, params) {
                if (this.optional(element)) {
                    return "dependency-mismatch";
                }
                var len = value.length;
                var firstChar = value.substr(0, 1);
                var lastChar = value.substr(len - 1, 1);
                if (value.match("[^0-9a-zA-Z.-]") != null) {
                    return false;
                }
                if (firstChar.match("[^0-9a-zA-Z]") != null) {
                    return false;
                }
                if (lastChar.match("[^0-9a-zA-Z]") != null) {
                    return false;
                }
                var pos = value.lastIndexOf(".");
                if (pos == -1) {
                    var str = value;
                    var templen = value.length;
                    for (var i = 0; i < len; i++) {
                        var tempvalue = str.substring(i, i + 1);
                        if (isNaN(parseInt(tempvalue))) {
                            return true;
                        }
                    }
                    return false;
                }
                else {
                    var str = value.substr(pos + 1);
                    var tmplen = value.length - (pos + 1);
                    for (var i = 0; i < tmplen; i++) {
                        var tmpvalue = str.substring(i, i + 1);
                        if (isNaN(parseInt(tmpvalue))) {
                            return true;
                        }
                    }
                    return false;
                }
            },
            "Por favor insira um nome de host válido. "
        );
        jQuery.validator.addMethod(
            "url",
            function (value, element, params) {
                if (this.optional(element)) {
                    return "dependency-mismatch";
                }
                var len = value.length;
                if ((len < 1) || (len > 256)) {
                    return false;
                }
                if (value.match("[^0-9a-zA-Z.:;,!@%#?_/&=+*'$()\\[\\]-]") != null) {
                    return false;
                }
                return true;
            },
            "Por favor, insira um URL válido. "
        );
        jQuery.validator.addMethod(
            "PasswordASCII",
            function (value, element, params) {
                if (this.optional(element)) {
                    return "dependency-mismatch";
                }
                if (value == "						") {
                    return true;
                }
                if (false == AsciiPasswordCheck(value)) {
                    params = 0;
                    return false;
                }
                if (false == AsciiCheck(value)) {
                    params = 1;
                    return false;
                }
                return true;
            },
            function (param, element) {
                var error = ["O formato da senha está errada. Por favor, digite novamente. ", "Por favor, indique apenas caracteres ASCII. "];
                var value = $(element).val();
                var ret = 0;
                if (false == AsciiPasswordCheck(value)) {
                    ret = 0;
                }
                else if (false == AsciiCheck(value)) {
                    ret = 1;
                }
                else {
                }
                if (ret <= error.length) {
                    return error[ret];
                }
            }
        );
        jQuery.validator.addMethod(
            "ASCII",
            function (value, element, params) {
                if (this.optional(element)) {
                    return "dependency-mismatch";
                }
                if (false == AsciiCheck(value)) {
                    return false;
                }
                return true;
            },
            "Por favor, indique apenas caracteres ASCII. "
        );
        jQuery.validator.addMethod(
            "PassStrong",
            function (value, element, params) {
                var num = 0;
                for (var j = 0; j < value.length; j++) {
                    var ch = value.charCodeAt(j);
                    if (ch < 32 || ch > 126) {
                        return false;
                    }
                }
                if (value.length < 8)
                    return false;
                if ((/[0-9]+/).test(value))
                    num = num + 1;
                if ((/[a-z]+/).test(value))
                    num = num + 1;
                if ((/[A-Z]+/).test(value))
                    num = num + 1;
                if ((/[!"#$%&'()*+,-./:;<=>?@\[\\\]^_`{|}~]+/).test(value))
                    num = num + 1;
                if (num < 3)
                    return false;
                return true;
            },
            "Please enter a strong password!"
        );
        jQuery.validator.addMethod(
            "utf8",
            function (value, element, params) {
                if (this.optional(element)) {
                    return "dependency-mismatch";
                }
                return true;
            },
            "Por favor, indique apenas caracteres ASCII. "
        );
        jQuery.validator.addMethod(
            "WEPKey128Bit",
            function (value, element, params) {
                if (this.optional(element)) {
                    return "dependency-mismatch";
                }
                var AsciiLenLimit = 13;
                var HexLenLimit = 26;
                if (AsciiCheckWithLen(value, AsciiLenLimit) == false
                    && HexCheckWithLen(value, HexLenLimit) == false) {
                    return false;
                }
                return true;
            },
            "Por favor insira 13 caracteres ASCII ou 26 dígitos hexadecimais. "
        );
        jQuery.validator.addMethod(
            "WEPAsciiOrHexLen",
            function (value, element, params) {
                if (this.optional(element)) {
                    return "dependency-mismatch";
                }
                var AsciiLenLimit = 5;
                var HexLenLimit = 10;
                var AsciiLenLimit13 = 13;
                var HexLenLimit26 = 26;
                if (AsciiCheckWithLen(value, AsciiLenLimit) == false
                    && HexCheckWithLen(value, HexLenLimit) == false
                    && AsciiCheckWithLen(value, AsciiLenLimit13) == false
                    && HexCheckWithLen(value, HexLenLimit26) == false) {
                    return false;
                }
                return true;
            },
            "Por favor, digite 5 ou 13 caracteres ASCII, ou digite 10 ou 26 dígitos hexadecimais. "
        );
        jQuery.validator.addMethod(
            "HEX",
            function (value, element, params) {
                if (this.optional(element)) {
                    return "dependency-mismatch";
                }
                if (HexCheck(value) == false) {
                    return false;
                }
                return true;
            },
            "Introduza apenas caracteres hexadecimais. "
        );
        jQuery.validator.addMethod(
            "fixedlength",
            function (value, element, param) {
                if (this.optional(element)) {
                    return "dependency-mismatch";
                }
                if (value.length != param) {
                    return false;
                }
                return true;
            },
            jQuery.validator.format("Por favor, indique {0} caracteres. ")
        );
        jQuery.validator.addMethod(
            "fixedValue",
            function (value, element, param) {
                if (this.optional(element)) {
                    return "dependency-mismatch";
                }
                if (value != param) {
                    return false;
                }
                return true;
            },
            jQuery.validator.format("O único valor permitido é {0}.")
        );
        function hexCompare(hexNum, hexRefer) {
            var num = parseInt(hexNum, 16);
            var refer = parseInt(hexRefer, 16);
            if (num < refer) {
                return -1;
            }
            else if (num > refer) {
                return 1;
            }
            else {
                return 0;
            }
        }
        jQuery.validator.addMethod(
            "hexRange",
            function (value, element, params) {
                if (this.optional(element)) {
                    return "dependency-mismatch";
                }
                if (typeof (params[0]) == "object") {
                    for (var i = 0; i < params.length; i++) {
                        var range = params[i];
                        if (typeof (range) == "object") {
                            if (hexCompare(value, range[0]) != -1 && hexCompare(value, range[1]) != 1) {
                                return true;
                            }
                        }
                    }
                }
                else {
                    if (hexCompare(value, params[0]) != -1 && hexCompare(value, params[1]) != 1) {
                        return true;
                    }
                }
                return false;
            },
            function (params, element) {
                var rangesStr = "";
                if (typeof (params[0]) == "object") {
                    var rangesLen = params.length;
                    for (var i = 0; i < rangesLen; i++) {
                        var range = params[i];
                        if (hexCompare(range[0], range[1]) != 0) {
                            rangesStr += range[0] + "~" + range[1];
                        }
                        else {
                            rangesStr += range[0];
                        }
                        if (i < rangesLen - 1) {
                            rangesStr += ", ";
                        }
                    }
                }
                else {
                    rangesStr = params[0] + "~" + params[1];
                }
                return $.validator.format("Por favor insira um valor hexadecimal em intervalos de {0}. ", rangesStr);
            }
        );
        jQuery.validator.addMethod(
            "ranges",
            function (value, element, param) {
                if (this.optional(element)) {
                    return "dependency-mismatch";
                }
                var rangesLen = param.length;
                for (var i = 0; i < rangesLen; i++) {
                    var range = param[i];
                    if (typeof range === 'number') {
                        if (value == range) {
                            return true;
                        }
                    }
                    else {
                        if (value >= range[0] && value <= range[1]) {
                            return true;
                        }
                    }
                }
                return false;
            },
            function (param, element) {
                var rangesStr = "";
                var rangesLen = param.length;
                for (var i = 0; i < rangesLen; i++) {
                    var range = param[i];
                    if (typeof range === 'number') {
                        rangesStr += range;
                    }
                    else {
                        rangesStr += range[0] + "~" + range[1];
                    }
                    if (i < rangesLen - 1) {
                        rangesStr += ",";
                    }
                }
                return $.validator.format("Por favor insira um valor em intervalos de {0}. ", rangesStr);
            }
        );
        jQuery.validator.addMethod(
            "integer",
            function (value, element, params) {
                if (this.optional(element)) {
                    return "dependency-mismatch";
                }
                return /^-?\d+$/.test(value);
            },
            "Digite um número inteiro. "
        );
        jQuery.validator.addMethod(
            "concurrence",
            function (value, element, param) {
                if (1 > param.length) {
                    return true;
                }
                var obj = get_element_obj($(element), param[0]);
                if (obj.is(":hidden")) {
                    return true;
                }
                if ("" == value && "" == obj.val()) {
                    return true;
                }
                if ("" != value && "" != obj.val()) {
                    return true;
                }
                return false;
            },
            "Por favor coloque prefixo válido. "
        );
        function get_element_obj(obj, id) {
            var instTplt = obj.closest("[id^=template_]");
            var elementID = obj.attr("id");
            var arr = elementID.split(':');
            var strId = id;
            if (arr.length > 1) {
                var exNum = arr[arr.length - 1];
                strId = id + ":" + exNum;
            }
            return $("[id^='" + strId + "']", instTplt);
        };
        function test_greatThan(obj, value, param, type) {
            if ("errstring" == type) {
                var tempstring = {
                    "1": param[2].separate ? "Por favor, indique um valor superior a \"{0}\". " : "Por favor insira um valor maior do que o anterior. ",
                    "2": param[2].separate ? "Por favor insira um valor não inferior a \"{0}\". " : "Por favor insira um valor não inferior ao primeiro. ",
                    "3": param[2].separate ? "Assegure-se de que a diferença com o primeiro não seja maior que {1}. " : "Assegure-se de que a diferença com o primeiro não seja maior que {1}. "
                };
                return $.validator.format(tempstring[param[2].ret], param[2].idtext, param[2].discrepantMode);
            }
            else {
                var tmpvalue = obj.val();
                var ret = true;
                if (param[2].equal) {
                    ret = Number(value) >= Number(tmpvalue);
                    if (!ret) {
                        param[2].ret = "2";
                        return false;
                    }
                }
                else {
                    ret = Number(value) > Number(tmpvalue);
                    if (!ret) {
                        param[2].ret = "1";
                        return false;
                    }
                }
                if (param[2].discrepantMode) {
                    ret = Number(value) - Number(tmpvalue) <= Number(param[2].discrepantMode);
                    if (!ret) {
                        param[2].ret = "3";
                        return false;
                    }
                }
                obj.parent().next().children().hide();
                return true;
            }
        };
        function test_lessThan(obj, value, param, type) {
            if ("errstring" == type) {
                var tempstring = {
                    "1": param[2].separate ? "Por favor insira um valor inferior a \"{0}\". " : "Por favor insira um valor menor do que o último. ",
                    "2": param[2].separate ? "Por favor insira um valor não superior a \"{0}\". " : "Por favor insira um valor não superior ao último. ",
                    "3": param[2].separate ? "Assegure-se de que a diferença com o primeiro não seja maior que {1}. " : "Assegure-se de que a diferença com o primeiro não seja maior que {1}. "
                };
                return $.validator.format(tempstring[param[2].ret], param[2].idtext, param[2].discrepantMode);
            }
            else {
                var tmpvalue = obj.val();
                var ret = true;
                if (param[2].equal) {
                    ret = Number(value) <= Number(tmpvalue);
                    if (!ret) {
                        param[2].ret = "2";
                        return false;
                    }
                }
                else {
                    ret = Number(value) < Number(tmpvalue);
                    if (!ret) {
                        param[2].ret = "1";
                        return false;
                    }
                }
                if (param[2].discrepantMode) {
                    ret = Number(tmpvalue) - Number(value) <= Number(param[2].discrepantMode);
                    if (!ret) {
                        param[2].ret = "3";
                        return false;
                    }
                }
                obj.parent().next().children().hide();
                return true;
            }
        };
        jQuery.validator.addMethod(
            "extremumRange",
            function (value, element, param) {
                if (this.optional(element)) {
                    return "dependency-mismatch";
                }
                if (2 > param.length) {
                    return true;
                }
                var obj = get_element_obj($(element), param[1]);
                if (3 > param.length) {
                    param[2] = {};
                }
                param[2]["idtext"] = obj.parent().prev().text();
                if (obj.is(":hidden") || "" == obj.val()) {
                    return true;
                }
                var selectMode = {
                    "greatThan": test_greatThan,
                    "lessThan": test_lessThan
                };
                return selectMode[param[0]](obj, value, param);
            },
            function (param, element) {
                var selectMode = {
                    "greatThan": test_greatThan,
                    "lessThan": test_lessThan
                };
                return selectMode[param[0]]("", "", param, "errstring");
            }
        );
        function range_greatThan(obj, value, param, type) {
            if ("errstring" == type) {
                var tempstring = {
                    "1": param[2].separate ? "Por favor, indique um valor superior a \"{0}\". " : (param[2].objPosition == "first" ? "Por favor insira um valor maior do que o anterior. " : "Por favor insira um valor maior do que o último."),
                    "2": param[2].separate ? "Por favor insira um valor não inferior a \"{0}\". " : (param[2].objPosition == "first" ? "Por favor insira um valor não inferior ao primeiro. " : "Por favor insira um valor não inferior ao último. "),
                    "3": param[2].separate ? "Por favor, assegure a diferença com \"{0}\" não maior que {1}. " : (param[2].objPosition == "first" ? "Assegure-se de que a diferença com o primeiro não seja maior que {1}. " : "Assegure-se de que a diferença com o primeiro não seja maior que {1}. ")
                };
                return $.validator.format(tempstring[param[2].ret], param[2].idtext, param[2].discrepantMode);
            }
            else {
                obj.parent().next().children().hide();
                var tmpvalue = obj.val();
                var ret = true;
                if (param[2].equal) {
                    ret = Number(value) >= Number(tmpvalue);
                    if (!ret) {
                        param[2].ret = "2";
                        return false;
                    }
                }
                else {
                    ret = Number(value) > Number(tmpvalue);
                    if (!ret) {
                        param[2].ret = "1";
                        return false;
                    }
                }
                if (param[2].discrepantMode) {
                    ret = Number(value) - Number(tmpvalue) <= Number(param[2].discrepantMode);
                    if (!ret) {
                        param[2].ret = "3";
                        return false;
                    }
                }
                return true;
            }
        };
        function range_lessThan(obj, value, param, type) {
            if ("errstring" == type) {
                var tempstring = {
                    "1": param[2].separate ? "Por favor insira um valor inferior a \"{0}\". " : (param[2].objPosition == "first" ? "Por favor insira um valor menor do que o anterior. " : "Por favor insira um valor menor do que o último. "),
                    "2": param[2].separate ? "Por favor insira um valor não superior a \"{0}\". " : (param[2].objPosition == "first" ? "Por favor insira um valor não superior ao primeiro." : "Por favor insira um valor não superior ao último. "),
                    "3": param[2].separate ? "Por favor, assegure a diferença com \"{0}\" não maior que {1}. " : (param[2].objPosition == "first" ? "Assegure-se de que a diferença com o primeiro não seja maior que {1}. " : "Assegure-se de que a diferença com o primeiro não seja maior que {1}. ")
                };
                return $.validator.format(tempstring[param[2].ret], param[2].idtext, param[2].discrepantMode);
            }
            else {
                obj.parent().next().children().hide();
                var tmpvalue = obj.val();
                var ret = true;
                if (param[2].equal) {
                    ret = Number(value) <= Number(tmpvalue);
                    if (!ret) {
                        param[2].ret = "2";
                        return false;
                    }
                }
                else {
                    ret = Number(value) < Number(tmpvalue);
                    if (!ret) {
                        param[2].ret = "1";
                        return false;
                    }
                }
                if (param[2].discrepantMode) {
                    ret = Number(tmpvalue) - Number(value) <= Number(param[2].discrepantMode);
                    if (!ret) {
                        param[2].ret = "3";
                        return false;
                    }
                }
                return true;
            }
        };
        jQuery.validator.addMethod(
            "compareRange",
            function (value, element, param) {
                if (this.optional(element)) {
                    return "dependency-mismatch";
                }
                if (2 > param.length) {
                    return true;
                }
                var obj = get_element_obj($(element), param[1]);
                if (3 > param.length) {
                    param[2] = {};
                }
                param[2]["idtext"] = obj.parent().prev().text();
                var selectMode = {
                    "greatThan": range_greatThan,
                    "lessThan": range_lessThan
                };
                return selectMode[param[0]](obj, value, param);
            },
            function (param, element) {
                var selectMode = {
                    "greatThan": range_greatThan,
                    "lessThan": range_lessThan
                };
                return selectMode[param[0]]("", "", param, "errstring");
            }
        );
        jQuery.validator.addMethod(
            "banValue",
            function (value, element, param) {
                if (this.optional(element)) {
                    return "dependency-mismatch";
                }
                var paramLen = param.length;
                for (var i = 0; i < paramLen; i++) {
                    var range = param[i];
                    if (typeof range === 'string') {
                        if (value == range) {
                            return false;
                        }
                    }
                    else {
                        if (value >= range[0] && value <= range[1]) {
                            return false;
                        }
                    }
                }
                return true;
            },
            function (param, element) {
                var rangesStr = "";
                var paramLen = param.length;
                for (var i = 0; i < paramLen; i++) {
                    var paraVal = param[i];
                    if ("object" === typeof paraVal) {
                        rangesStr += paraVal[0] + "~" + paraVal[1];
                    }
                    else {
                        rangesStr += paraVal;
                    }
                    if (i < paramLen - 1) {
                        rangesStr += ", ";
                    }
                }
                if (paramLen > 1) {
                    return $.validator.format("Por favor, garantir a entrada não nas faixas de \"{0}\". ", rangesStr);
                }
                else {
                    return $.validator.format("Por favor, garantir a entrada não é igual a \"{0}\". ", rangesStr);
                }
            }
        );
        jQuery.validator.addClassRules({
            ipSepCheck: {
                "required": true,
                "integer": true,
                "range": [0, 255]
            },
            macSepCheck: {
                "required": true,
                "HEX": true,
                "fixedlength": 2
            }
        });
        function checkTimeHMS(timestr) {
            var re = /^([0-1]{1}[0-9]{1}|[2]{1}[0-3]{1}):[0-5]{1}[0-9]{1}:[0-5]{1}[0-9]{1}$/;
            if (re.test(timestr) == true) {
                return true;
            }
            return false;
        }
        jQuery.validator.addMethod(
            "checkTimeHMS",
            function (value, element, params) {
                if (this.optional(element)) {
                    return "dependency-mismatch";
                }
                if (checkTimeHMS(value) == true) {
                    return true;
                }
                return false;
            },
            "Insira o formato de hora correto como HH: MM: SS."
        );
        function time_earlierThan(obj, value, param, type) {
            var tmpvalue = obj.val();
            var ret = true;
            var valuearr = value.split(":");
            var tmpvaluearr = tmpvalue.split(":");
            if (valuearr[0] < tmpvaluearr[0]) {
                return true;
            }
            else {
                if (valuearr[0] === tmpvaluearr[0] && valuearr[1] < tmpvaluearr[1]) {
                    return true;
                }
                else {
                    if (valuearr[1] === tmpvaluearr[1] && valuearr[2] < tmpvaluearr[2]) {
                        return true;
                    }
                }
                return false;
            }
        };
        function time_laterThan(obj, value, param, type) {
            var tmpvalue = obj.val();
            var ret = true;
            var valuearr = value.split(":");
            var tmpvaluearr = tmpvalue.split(":");
            if (valuearr[0] > tmpvaluearr[0]) {
                return true;
            }
            else {
                if (valuearr[0] === tmpvaluearr[0] && valuearr[1] > tmpvaluearr[1]) {
                    return true;
                }
                else {
                    if (valuearr[1] === tmpvaluearr[1] && valuearr[2] > tmpvaluearr[2]) {
                        return true;
                    }
                }
                return false;
            }
        };
        jQuery.validator.addMethod(
            "timeComparison",
            function (value, element, param) {
                if (this.optional(element)) {
                    return "dependency-mismatch";
                }
                if (2 > param.length) {
                    return true;
                }
                var obj = get_element_obj($(element), param[1]);
                if (3 > param.length) {
                    param[2] = {};
                }
                param[2]["idtext"] = obj.parent().prev().text();
                if (obj.is(":hidden") || "" == obj.val()) {
                    return true;
                }
                var selectMode = {
                    "laterThan": time_laterThan,
                    "earlierThan": time_earlierThan
                };
                return selectMode[param[0]](obj, value, param);
            },
            "A hora de início deve ser anterior à hora de término."
        );
        function compareIPv4(firstIP, secondIP) {
            var fIP;
            var sIP;
            fIP = firstIP.split(".");
            sIP = secondIP.split(".");
            for (var i = 0; i < 4; i++) {
                if (fIP[i] != "" && sIP[i] != "") {
                    fIP[i] = parseInt(fIP[i], 10);
                    sIP[i] = parseInt(sIP[i], 10);
                }
                if (fIP[i] > sIP[i]) {
                    return 1;
                }
                else if (fIP[i] < sIP[i]) {
                    return -1;
                }
            }
            return 0;
        }
        function checkWholeIPv4(k, v, ipValue, template) {
            var vLen = v.length;
            var retMsg = "";
            for (var j = 0; j < vLen; j++) {
                if (retMsg != "") {
                    retMsg += ", ";
                }
                var range = v[j];
                if (typeof range === 'string') {
                    retMsg += range;
                }
                else {
                    retMsg += range[0] + " ~ " + range[1];
                }
            }
            if (k == "banValue") {
                retMsg = "Não é permitido introduzir o seguinte valor (es): {0}. ".format(retMsg);
                for (var i = 0; i < vLen; i++) {
                    var range = v[i];
                    if (typeof range === 'string') {
                        if (ipValue == range) {
                            return [false, k, retMsg];
                        }
                    }
                    else {
                        if ("-1" != compareIPv4(ipValue, range[0]) &&
                            "1" != compareIPv4(ipValue, range[1])) {
                            return [false, k, retMsg];
                        }
                    }
                }
            }
            else if (k == "allowRange") {
                retMsg = "Entrada inválida. Por favor, certifique-se de que a entrada esteja no seguinte intervalo: {0}. ".format(retMsg);
                for (var i = 0; i < vLen; i++) {
                    var range = v[i];
                    if ("-1" != compareIPv4(ipValue, range[0]) &&
                        "1" != compareIPv4(ipValue, range[1])) {
                        return [true, "", ""];
                    }
                }
                return [false, k, retMsg];
            }
            else if (k == "notLessThan") {
                retMsg = "";
                var IPObj = $("[id^='" + v + "']", template);
                IPObj.FillIPorMacDataCombination("sub_" + v, ".", 4);
                var minValue = IPObj.val();
                if (-1 == compareIPv4(ipValue, minValue)) {
                    return [false, k, retMsg];
                }
            }
            else if (k == "notMoreThan") {
                retMsg = "";
                var IPObj = $("[id^='" + v + "']", template);
                IPObj.FillIPorMacDataCombination("sub_" + v, ".", 4);
                var maxValue = IPObj.val();
                if (1 == compareIPv4(ipValue, maxValue)) {
                    return [false, k, retMsg];
                }
            }
            else {
            }
            return [true, "", ""];
        }
        function checkWholeMac(k, v, macValue) {
            var vLen = v.length;
            var retMsg = "";
            for (var j = 0; j < vLen; j++) {
                if (retMsg != "") {
                    retMsg += ", ";
                }
                var range = v[j];
                if (typeof range === 'string') {
                    retMsg += range;
                }
                else {
                    retMsg += range[0] + " ~ " + range[1];
                }
            }
            if (k == "banValue") {
                retMsg = "Não é permitido introduzir o seguinte valor (es): {0}. ".format(retMsg);
                for (var i = 0; i < vLen; i++) {
                    var range = v[i];
                    if (typeof range === 'string') {
                        if (macValue.toLowerCase() == range.toLowerCase()) {
                            return [false, k, retMsg];
                        }
                    }
                }
            }
            else {
            }
            return [true, "", ""];
        }
        function getMsgofWholeMACIPCheck(checkRetArray, ruleObj, checkValue, checkParaName) {
            var errMsg = "";
            var ruleName = checkRetArray[1];
            if (ruleObj.messages[ruleName] != undefined) {
                return ruleObj.messages[ruleName];
            }
            switch (ruleName) {
                case "banValue": {
                    if (checkParaName != "") {
                        errMsg = checkParaName + checkRetArray[2];
                    }
                    else {
                        errMsg = "A operação atual é inválida, por favor, verifique os parâmetros de configuração." + "[" + "Erro:" + checkValue + "]";
                    }
                    break;
                }
                case "allowRange": {
                    if (checkParaName != "") {
                        errMsg = checkParaName + checkRetArray[2];
                    }
                    else {
                        errMsg = "A operação atual é inválida, por favor, verifique os parâmetros de configuração." + "[" + "Erro:" + checkValue + "]";
                    }
                    break;
                }
                default: {
                    errMsg = "error msg undefined!";
                }
            }
            return errMsg;
        }
        jQuery.validator.addMethod(
            "utf8LengthRange",
            function (value, element, param) {
                if (this.optional(element)) {
                    return "dependency-mismatch";
                }
                var valLength = value.length;
                var param1 = param[0];
                var param2 = param[1];
                if (param2 < 3) {
                    alert("utf8LengthRange is invalid![" + param2 + "<" + 3 + "]");
                }
                else {
                    param1 = Math.ceil(parseInt(param[0]) / 3);
                    param2 = Math.floor(parseInt(param[1]) / 3);
                    if (param1 < param2) {
                        if (valLength >= param1 && valLength <= param2) {
                            return true;
                        }
                    }
                    else if (param1 == param2) {
                        if (valLength == param2) {
                            return true;
                        }
                    }
                    else {
                        alert("utf8LengthRange [" + param1 + "," + param2 + "] is invalid!");
                    }
                }
                return false;
            },
            function (param, element) {
                var lengthStr = "";
                var param1 = param[0];
                var param2 = param[1];
                if (param2 < 3) {
                    lengthStr = " Range Error!!!!!![param2<WEB_UTF8_REALBYTE]";
                }
                else {
                    param1 = Math.ceil(parseInt(param[0]) / 3);
                    param2 = Math.floor(parseInt(param[1]) / 3);
                    if (param1 < param2) {
                        lengthStr = param1 + " ~ " + param2;
                    }
                    else if (param1 == param2) {
                        lengthStr = param2;
                    }
                    else {
                        lengthStr = " Range Error!!!!!![" + param1 + "," + param2 + "]";
                    }
                }
                return $.validator.format("Por favor insira um valor com {0} caracteres.", lengthStr);
            }
        );


        (function () {
            $(document).ready(function () {
                var curv = 139;
                if (curv == "65")
                    $("#languageSwitch").hide();
            });
        })();

        (function () {
            $(document).ready(function () {
                var CountryCode = "139";
                if (CountryCode == "152" || CountryCode == "163") {
                    $("#logo").attr("class", "logo_Claro");
                }
            });
        })();
        (function () {
            $(document).ready(function () {
                var CountryCode = "139";
                if (CountryCode == "21") {
                    $("#logo").attr("class", "logo_Antel");
                }
            });
        })();

        (function () {
            $(document).ready(function () {
                var CountryCode = "139";
                if (CountryCode == "36") {
                    $("#logo").addClass("logo_Tot");
                    $("#timeArea").addClass("timeArea_Tot");
                }
            });
        })();
        (function () {
            $(document).ready(function () {
                var CountryCode = "139";
                if (CountryCode == "106") {
                    $("#logo").addClass("logo_Morocco");
                }
            });
        })();
        (function () {
            $(document).ready(function () {
                var CountryCode = "139";
                if (CountryCode == "138") {
                    $("#logo").addClass("logo_IvoryOrange");
                }
            });
        })();
        (function () {
            $(document).ready(function () {
                var CountryCode = "139";
                if (CountryCode == "174") {
                    $("#logo").addClass("logo_Orange");
                }
            });
        })();

        (function () {
            $(document).ready(function () {
                var CountryCode = "139";
                if (CountryCode == "137") {
                    $("#logo").attr("class", "logo_Tarr");
                }
            });
        })();






        var menuTreeJSON = [{ "id": "homePage", "name": "Inicio", "extData": "Mostra as informações importantes.", "area": [{ "area": "home_t.lp" }] }, { "id": "mmTopology", "name": "Topologia", "area": [{ "area": "topo_t.lp" }] }, { "id": "internet", "name": "Internet" }, { "id": "localnet", "name": "Rede local" }, { "id": "voip", "name": "VoIP" }, { "id": "mgrAndDiag", "name": "Gerência & Diagnóstico" }];
        var menuTreeObj = new MenuTreeClass(menuTreeJSON);
        var _sessionTmpToken = "\x58\x6c\x47\x38\x43\x56\x31\x51\x70\x5a\x4c\x6a\x4e\x57\x44\x67\x34\x7a\x64\x77\x50\x72\x6d\x41";
        var preLoadImg = [];
        preLoadImg[0] = "/img/nv_s.gif";
        preLoadImg[1] = "/img/nv_left.gif";
        preLoadImg[2] = "/img/nv_right.gif";
        preLoadImg[3] = "/img/nv_middle.gif";
        preLoadImg[4] = "/img/English_s.gif";
        preLoadImg[5] = "/img/Chinese.gif";
        preLoadImg[6] = "/img/Chinese_s.gif";
        preLoadImg[7] = "/img/English.gif";
        preLoadImg[8] = "/img/waiting.gif";
        preLoadImg[9] = "/img/info_m.png";
        preLoadImg[10] = "/img/waiting_w.gif";
        function preload(Img) {
            var imgTmp = [];
            for (var i = 0; i < Img.length; i++) {
                imgTmp[i] = new Image();
                imgTmp[i].src = Img[i];
            }
        }
        preload(preLoadImg);
    </script>
</head>

<body>
    <script type="text/javascript">
        if (top != self) {
            document.getElementsByTagName("body")[0].style.display = 'none';
            top.location = self.location;
        }
        function LogOff() {
            showWaitTip(true);
            $.post("/?_type=loginData&_tag=logout_entry", { IF_LogOff: 1 }, undefined, "json")
                .done(function (data) {
                    if (data.need_refresh) {
                        top.location.href = top.location.href;
                    }
                });
        }
        function LogUser() {
            openLink("accountMgr" + "&Menu3Location=0");
        }
    </script>
    <div
        id="blackMask"
        class="black_overlay"
        style="display:none;"
    ></div>
    <div
        id="tipLayer"
        class="white_content"
    >
        <div
            id="confirmLayer"
            style="display:none;"
        >
            <div id="confirmMsg">
                <p>are you sure?</p>
            </div>
            <div
                id="waitingImgArea"
                style="display:none;"
            >
            </div>
            <div
                id="confirmBtnArea"
                style="display:none;"
            >
                <input
                    type="button"
                    class="button"
                    id="confirmCancel"
                    value="Cancelar"
                />
                <input
                    type="button"
                    class="button"
                    id="confirmOK"
                    value="OK"
                />
                <input
                    type="button"
                    class="button"
                    id="confirmStop"
                    value="Parar"
                />
            </div>
        </div>
    </div>
    <div id="page_container">
        <div id="page_header">
            <div id="banner">
                <div
                    id="logo"
                    class="logo"
                ></div>
                <div
                    class="timeArea"
                    id="timeArea"
                    style="display:none;"
                >
                    Hora atual: <span id="_DevCurrTime">Carregando...</span>
                </div>
                <div id="banner_switchArea">


                    <div id="languageSwitch">
                        <img
                            src="/img/Portuguese.gif"
                            alt="Chinese"
                            id="PortugueseModify"
                        />
                        <img
                            src="/img/English.gif"
                            alt="English"
                            id="EnglishModify"
                        />
                    </div>

                    <div
                        id="logOff"
                        class="emColor clickable"
                        onclick="LogOff()"
                    >
                        <div id="LogOffLnk"> Sair</div>
                        <div
                            id="logUser"
                            class="logUser"
                            title="&#97;&#100;&#109;&#105;&#110;"
                        >
                            &#97;&#100;&#109;&#105;&#110;
                        </div>
                    </div>
                </div>
            </div>
            <div id="mainNavigator">
                <div id="mn_first"></div>
                <div id="mn_li"></div>
                <div id="mn_last"></div>
            </div>
        </div>
        <div id="page_content">

            <script type="text/javascript">

                var loginLockInterval = null;
                var editableInputs;
                var dftFcsTaget;
                var IsAllowedSubmit = true;
                function createTimeCountDownMessage(lockingTime, promptMsg) {
                    if ((promptMsg != null && promptMsg.length > 0) || lockingTime > 0) {

                        var timeOutHint = promptMsg.concat("Por favor, tente novamente após {1} segundos. ");
                        $("#login_error_waittime").text(timeOutHint.format(3, lockingTime)).show();
                    }
                    else {
                        $("#login_error_waittime").hide();
                    }
                }
                function timer(seconds, promptMsg) {
                    window.setTimeout(function () {
                        editableInputs.removeAttr("disabled");
                        if (dftFcsTaget) {
                            dftFcsTaget.focus();
                        }
                        $("#LoginId").removeAttr("disabled").removeClass("disableBtn");
                        $("#login_error").hide();
                        $("#login_error_waittime").hide().text("");
                        if (loginLockInterval) {
                            window.clearInterval(loginLockInterval);
                            consoleLog("timeout to clearInterval!!!");
                        }
                    }, seconds * 1000);
                    loginLockInterval = window.setInterval((function (sec, msg) {
                        return function () {
                            if (sec > 0) {
                                sec--;
                            }
                            createTimeCountDownMessage(sec, msg);
                        };
                    })(seconds, promptMsg), 1000);
                }
                function SetPasswordValue(obj) {
                    var template = $("#loginWrapper");
                    var objJQ = $(obj);
                    var passInvisibleOBJ = $("[id^='Frm_Password'][class*='passInvisible']", template);
                    var pwvalue = objJQ.val();
                    passInvisibleOBJ.val(pwvalue);
                }
                function PasswordChange(template) {
                    var typeOBJ = $("[id^='Switch_Password']", template);
                    var passVisibleOBJ = $("[id^='Frm_Password'][class*='passVisible']", template);
                    var passVisibleVal = passVisibleOBJ.val();
                    var passInvisibleOBJ = $("[id^='Frm_Password'][class*='passInvisible']", template);
                    var passInvisibleVal = passInvisibleOBJ.val();
                    passInvisibleOBJ.addClass("valid");
                    if (typeOBJ.is(':checked')) {
                        passInvisibleOBJ.hide();
                        passVisibleOBJ.show();
                        passVisibleOBJ.val(passInvisibleVal);
                    }
                    else {
                        passVisibleOBJ.hide();
                        passInvisibleOBJ.show();
                        passInvisibleOBJ.val(passVisibleVal);
                    }
                }
                function showTimeCountDown(lockingTime, promptMsg) {
                    if (lockingTime > 0) {
                        createTimeCountDownMessage(lockingTime, promptMsg);
                        $("#LoginId").attr("disabled", "true").addClass("disableBtn");
                        editableInputs.attr("disabled", "true");
                        timer(lockingTime, promptMsg);
                    }
                }
                function DisplayLoginErrorTip(loginData) {
                    var loginErrMsg = loginData.loginErrMsg;
                    var lockingTime = loginData.lockingTime;
                    var promptMsg = loginData.promptMsg;
                    lockingTime = parseInt(lockingTime);
                    if (IsBrowserSupportCookie() == false) {
                        $("#login_error").show();
                        $("#login_error_span").text("A funcionalidade de cookies do seu navegador está desativada, por favor, ligue-o antes de fazer login.");
                    }
                    else if (loginErrMsg.length > 0 || promptMsg.length > 0) {
                        $("#login_error").show();
                        if (loginErrMsg.length > 0) {
                            $("#login_error_span").text(loginErrMsg).show();
                        }
                        else {
                            $("#login_error_span").hide();
                        }
                        if (lockingTime > 0 || promptMsg.length > 0) {
                            showTimeCountDown(lockingTime, promptMsg);
                        }
                    }
                    else {
                        $("#login_error").hide();
                    }
                }
                function g_loginToken(xml) {
                    var xmlObj = $(xml).text();
                    var Password = $("#Frm_Password").val();
                    var SHA256Password = sha256(Password + xmlObj);
                    var postData = {};
                    postData["action"] = "login";
                    postData["Password"] = SHA256Password;
                    postData["Username"] = $("#Frm_Username").val();
                    postData["_sessionTOKEN"] = $("#_sessionTOKEN").val();
                    Password = undefined;
                    SHA256Password = undefined;
                    $.post("/?_type=loginData&_tag=login_entry", postData, undefined, "json")
                        .done(function (data) {
                            $("#_sessionTOKEN").val(data.sess_token);
                            if (data.login_need_refresh) {
                                top.location.href = top.location.href;
                            }
                            else {
                                DisplayLoginErrorTip(data);
                            }
                        });
                    postData = undefined;
                }
                function CanTextAndPasswordSwitch_InputType() {
                    var pass = document.createElement('input');
                    pass.type = 'text';
                    pass.style.display = "none";
                    document.body.appendChild(pass);
                    var retVal = true;
                    try {
                        pass.type = 'password';
                        if ("password" == pass.type) {
                            pass.type = 'text';
                            if ("text" == pass.type) {
                                retVal = true;
                            }
                            else {
                                retVal = false;
                            }
                        }
                        else {
                            retVal = false;
                        }
                    }
                    catch (e) {
                        retVal = false;
                    }
                    document.body.removeChild(pass);
                    return retVal;
                }
                var throttle = function (fn, delay, atleast) {
                    var timer = null, previous = null;
                    return function () {
                        var context = this, args = arguments, now = +new Date();
                        if (!previous) { previous = now; }
                        if (now - previous > atleast) {
                            fn.apply(context, args);
                            previous = now;
                        } else {
                            clearTimeout(timer);
                            timer = setTimeout(function () {
                                fn.apply(context, args);
                            }, delay);
                        }
                    };
                };
                $(document).ready(function () {
                    var loginForm = $(".loginInstCfgArea");
                    editableInputs = $("input", loginForm).not(":disabled").not("[readonly=readonly]");
                    $.getJSON("/?_type=loginData&_tag=login_entry")
                        .done(function (json) {
                            $("#_sessionTOKEN").val(json.sess_token);
                            DisplayLoginErrorTip(json);
                        })
                        .fail(function (jqxhr, textStatus, error) {
                            var err = textStatus + ", " + error;
                            consoleLog("Request Failed: " + err);
                        });
                    editableInputs.each(function () {
                        if ($(this).val() == "") {
                            $(this).focus();
                            dftFcsTaget = $(this);
                            return false;
                        }
                    });
                    $("#LoginId").bind("click", throttle(function () {
                        if (true == IsAllowedSubmit) {
                            var loadAllowAddr = "/?_type=loginData&_tag=login_token";
                            $(this).dataTransfer(loadAllowAddr, "GET", g_loginToken, undefined, false);
                        }
                    }, 300, 300));
                    showWaitTip(false);
                    editableInputs.keydown(function (event) {
                        if (event.keyCode == 13) {
                            event.preventDefault();
                            event.stopPropagation();
                            $("#LoginId").click();
                        }
                    });
                });
                var ssidConf = {};
                var commConf = {};

                commConf = JSON.parse('{"setEncode":true,"fwPortServHidden":"","ValidateCode":false,"getEncode":true,"fwscServCtl":"","IntegCheck":true,"webEnable":true}');
                if (!commConf.dataSave) {
                    commConf.dataSave = 2000;
                }
                String.prototype.format = function (args) {
                    var result = this;
                    if (arguments.length > 0) {
                        for (var i = 0; i < arguments.length; i++) {
                            if (arguments[i] != undefined) {
                                var reg = new RegExp("({[" + i + "]})", "g");
                                result = result.replace(reg, arguments[i]);
                            }
                        }
                    }
                    return result;
                };
                function showOrHideRowDiv() {
                    if (arguments.length < 2) {
                        return;
                    }
                    var action = arguments[0];
                    for (var i = 1; i < arguments.length; i++) {
                        var subWidget = arguments[i].find("*[id!='']");
                        if (action == "show") {
                            arguments[i].showIt(true);
                            subWidget.removeClass("PostIgnore");
                        }
                        else {
                            arguments[i].showIt(false);
                            subWidget.addClass("PostIgnore");
                        }
                    }
                }
                function colonStripping(str) {
                    var colonLocation = str.indexOf(":");
                    if (colonLocation != -1) {
                        return str.substring(0, colonLocation);
                    }
                    return str;
                }
                function colonStrippingLast(str) {
                    var colonLocation = str.lastIndexOf(":");
                    if (colonLocation != -1) {
                        return str.substring(0, colonLocation);
                    }
                    return str;
                }
                function randomNum(n) {
                    var t = '';
                    for (var i = 0; i < n; i++) {
                        t += Math.floor(Math.random() * 10);
                    }
                    return t;
                }
                function checkPassStrong(sz) {
                    if (/[a-z]/.test(sz) && /[A-Z]/.test(sz) && /[0-9]/.test(sz) && (sz.length >= 8)) {
                        return true;
                    }
                    return false;
                }
                function asyEncode(srcStr) {
                    var pubKey = "-----BEGIN PUBLIC KEY-----\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAodPTerkUVCYmv28SOfRV\n7UKHVujx/HjCUTAWy9l0L5H0JV0LfDudTdMNPEKloZsNam3YrtEnq6jqMLJV4ASb\n1d6axmIgJ636wyTUS99gj4BKs6bQSTUSE8h/QkUYv4gEIt3saMS0pZpd90y6+B/9\nhZxZE/RKU8e+zgRqp1/762TB7vcjtjOwXRDEL0w71Jk9i8VUQ59MR1Uj5E8X3WIc\nfYSK5RWBkMhfaTRM6ozS9Bqhi40xlSOb3GBxCmliCifOJNLoO9kFoWgAIw5hkSIb\nGH+4Csop9Uy8VvmmB+B3ubFLN35qIa5OG5+SDXn4L7FeAA5lRiGxRi8tsWrtew8w\nnwIDAQAB\n-----END PUBLIC KEY-----";
                    var encrypt = new JSEncrypt();
                    encrypt.setPublicKey(pubKey);
                    var encrypted = encrypt.encrypt(srcStr);
                    var dstStr = encrypted.toString();
                    if (dstStr.length == 0 || dstStr == "false") {
                        console.log("encrypt key fail!");
                        dstStr = "";
                    }
                    return dstStr;
                }
                function encodeKey(key, iv) {
                    var kv = key + "+" + iv;
                    return asyEncode(kv);
                }
                function encodeParaValue(src, key, iv) {
                    if (src.length > 0) {
                        var bKey = CryptoJS.SHA256(key);
                        var bIv = CryptoJS.SHA256(iv);
                        var encrypted = CryptoJS.AES.encrypt(src, bKey,
                            {
                                iv: bIv,
                                mode: CryptoJS.mode.CBC,
                                padding: CryptoJS.pad.ZeroPadding
                            });
                        var dst = encrypted.toString();
                        if (dst != "" && dst != "failed") {
                            return dst;
                        }
                    }
                    return src;
                }
                function decodeParaValue(src, key, iv) {
                    if (src.length > 0) {
                        var bKey = CryptoJS.SHA256(key);
                        var bIv = CryptoJS.SHA256(iv);
                        var decrypted = CryptoJS.AES.decrypt(src, bKey,
                            {
                                iv: bIv,
                                mode: CryptoJS.mode.CBC,
                                padding: CryptoJS.pad.ZeroPadding
                            });
                        var dst = decrypted.toString(CryptoJS.enc.Utf8);
                        if (dst != "" && dst != "failed") {
                            return dst;
                        }
                    }
                    return src;
                }
                function getDecodeValue(data) {
                    var key = _sessionTmpToken;
                    var iv = key.split("").reverse().join("");
                    return decodeParaValue(data, key, iv);
                }
                jQuery.fn.showIt = function (show) {
                    if (show) {
                        $(this).css("display", "");
                    }
                    else {
                        $(this).css("display", "none");
                    }
                };
                jQuery.fn.disableIt = function (disable) {
                    if (disable) {
                        $(this).attr("disabled", "disabled");
                        $(this).addClass("PostIgnore");
                    }
                    else if (undefined == $(this).attr("hideattr")) {
                        $(this).prop("disabled", "");
                        $(this).removeClass("PostIgnore");
                    }
                };
                jQuery.fn.disableButton = function (disable) {
                    if (disable) {
                        $(this).addClass("disableBtn");
                    }
                    else if (undefined == $(this).attr("hideattr")) {
                        $(this).removeClass("disableBtn");
                    }
                };
                function GetSuffixedIDorName(oldValue, suffix, splitter, forParaName) {
                    var newValue = "";
                    if (forParaName == true) {
                        oldValue = oldValue.split(":");
                        oldValue[0] += splitter + suffix;
                        newValue = oldValue.join(":");
                    }
                    else {
                        newValue = oldValue + splitter + suffix;
                    }
                    return newValue;
                }
                jQuery.fn.cloneWithSuffix = function (suffix, splitter, forParaName) {
                    var source = $(this);
                    var clone = source.clone(true);
                    clone.attr("id", clone.attr("id") + "_" + suffix);
                    if (undefined == splitter) {
                        splitter = ":";
                    }
                    if (undefined == forParaName) {
                        forParaName = false;
                    }
                    var idElems = clone.find("*[id!='']");
                    idElems.each(function () {
                        var idEle = $(this);
                        var oldID = idEle.attr("id");
                        if (oldID != undefined) {
                            var newID = GetSuffixedIDorName(oldID, suffix, splitter, forParaName);
                            idEle.attr("id", newID);
                        }
                        var oldName = idEle.attr("name");
                        if (oldName != undefined) {
                            var newName = GetSuffixedIDorName(oldName, suffix, splitter, forParaName);
                            idEle.attr("name", newName);
                        }
                    });
                    labelForElems = clone.find("label");
                    labelForElems.each(function () {
                        var labelForEle = $(this);
                        var oldFor = labelForEle.attr("for");
                        if (oldFor != undefined) {
                            var newFor = GetSuffixedIDorName(oldFor, suffix, splitter, forParaName);
                            labelForEle.attr("for", newFor);
                        }
                    });
                    clone.trigger("applyPromptCheckJSON", [clone]);
                    return clone;
                };
                function initial_sceneTip() {
                    $(".sceneTip_container").each(function () {
                        $(this).hide();
                    });
                    $(".sceneTipLink").each(function () {
                        var sceneTipLinkContent = $(this).children();
                        sceneTipLinkContent.unbind("click");
                        sceneTipLinkContent.click(function (event) {
                            event.preventDefault();
                            $(this).parent().next().slideToggle("normal");
                        });
                    });
                    $(".sceneTip_close").each(function () {
                        var sceneTip_closeLink = $(this).children();
                        sceneTip_closeLink.unbind("click");
                        sceneTip_closeLink.click(function () {
                            $(this).parent().parent().slideUp("normal");
                        });
                    });
                }
                function succHintShow(template) {
                    var PostFeedbackOBJ = $(".succHint", template);
                    PostFeedbackOBJ.fadeIn(1000);
                    window.setTimeout(
                        function () {
                            PostFeedbackOBJ.fadeOut(1000);
                            PostFeedbackOBJ.hide();
                        },
                        commConf.dataSave
                    );
                }
                jQuery.fn.dataTransfer = function (URL, transferType, success_func, error_func, IfShowWaitTip, async, dataType) {
                    if (!URL || URL == "") {
                        consoleLog("[dataTransfer]URL is illegal!");
                        return;
                    }
                    var IfShowWaitTipTmp = IfShowWaitTip;
                    if (IfShowWaitTipTmp == undefined) {
                        IfShowWaitTipTmp = true;
                    }
                    var asyncTemp = async;
                    if (asyncTemp == undefined) {
                        asyncTemp = true;
                    }
                    if (IfShowWaitTipTmp == true) {
                        showWaitTip(true);
                    }
                    var Head = $(this);
                    $.ajax({
                        url: URL,
                        type: transferType,
                        timeout: 30000,
                        async: asyncTemp,
                        cache: false,
                        error: function () {
                            if ($.isFunction(error_func)) {
                                error_func();
                            }
                            else {
                                if (Head != undefined) {
                                    var ajaxTransferFailHint = "O servidor não está disponível agora. Atualize a página para recarregar. ";
                                    var externErrorHint = $(".externErrorHint", Head);
                                    if (externErrorHint != undefined) {
                                        $("span", externErrorHint).text(ajaxTransferFailHint);
                                        externErrorHint.showIt(true);
                                    }
                                }
                                showWaitTip(false);
                            }
                        },
                        success: function (data) {
                            success_func(data);
                            if (IfShowWaitTipTmp == true) {
                                showWaitTip(false);
                            }
                        }
                    });
                };
                function HTMLEnCode(str) {
                    var s = "";
                    if (typeof (str) != "string") {
                        return str;
                    }
                    if (str.length == 0) {
                        return "";
                    }
                    s = str.replace(/&/g, "&#38;");
                    s = s.replace(/</g, "&#60;");
                    s = s.replace(/>/g, "&#62;");
                    s = s.replace(/ /g, "&#32;");
                    s = s.replace(/\'/g, "&#39;");
                    s = s.replace(/\"/g, "&#34;");
                    return s;
                }
                function addSlash(srcStr) {
                    var str = "";
                    var ch = "";
                    if (typeof (srcStr) != "string") {
                        return srcStr;
                    }
                    for (var i = 0; i < srcStr.length; i++) {
                        ch = srcStr.substr(i, 1);
                        if ("\\" == ch) {
                            ch = "\\\\";
                        }
                        else if ("\'" == ch) {
                            ch = "\\\'";
                        }
                        else if ("\"" == ch) {
                            ch = "\\\"";
                        }
                        str = str + ch;
                    }
                    return str;
                }
                function SetSelectValue(SelectElem, data) {
                    $("option[class='_optExpHandle']", SelectElem).remove();
                    var findOption = 0;
                    $("option", SelectElem).removeAttr("selected");
                    $("option", SelectElem).each(function () {
                        var OptionObj = $(this);
                        if (OptionObj.val() == data) {
                            findOption = 1;
                            return false;
                        }
                    });
                    if (findOption == 0) {
                        SelectElem.append("<option value='" + HTMLEnCode(data)
                            + "' title='--Desconhecido--' class='_optExpHandle'>"
                            + "--Desconhecido--" + "</option>");
                    }
                    SelectElem.val(data);
                }
                jQuery.fn.fillDataByType = function (data) {
                    var Elems = $(this);
                    if (Elems.is("input")) {
                        switch (Elems.attr("type")) {
                            case "hidden":
                                {
                                    Elems.val(data);
                                    if (Elems.attr("_LuQUID_splitMACID") != undefined) {
                                        var splitMACID = Elems.attr("_LuQUID_splitMACID");
                                        Elems.FillIPorMacDataBySplit(splitMACID, ":", 6);
                                    }
                                    else if (Elems.attr("_LuQUID_splitIPID") != undefined) {
                                        var splitIPID = Elems.attr("_LuQUID_splitIPID");
                                        Elems.FillIPorMacDataBySplit(splitIPID, ".", 4);
                                    }
                                    break;
                                }
                            case "text":
                            case "password":
                                {
                                    if (commConf.getEncode && Elems.attr("encode") == "1") {
                                        data = getDecodeValue(data);
                                    }
                                    Elems.val(data);
                                    if (typeof (Elems.attr("title")) != "undefined") {
                                        Elems.attr("title", data);
                                    }
                                    break;
                                }
                            case "checkbox":
                                {
                                    if (1 == data) {
                                        Elems.prop("checked", true);
                                    }
                                    else {
                                        Elems.prop("checked", false);
                                    }
                                    Elems.val(data);
                                    break;
                                }
                            default:
                                {
                                    break;
                                }
                        }
                    }
                    else if (Elems.is("span")) {
                        Elems.text(data);
                        if (typeof (Elems.attr("title")) != "undefined") {
                            Elems.attr("title", data);
                        }
                    }
                    else if (Elems.is("a")) {
                        Elems.text(data);
                        Elems.attr("href", data);
                    }
                    else if (Elems.is("select")) {
                        SetSelectValue(Elems, data);
                    }
                    else if (Elems.is("textarea")) {
                        Elems.val(data);
                    }
                    else if (Elems.is("label")) {
                        Elems.text(data);
                    }
                    else if (Elems.is("div")) {
                        var radioObj = $("input[type=radio]", Elems);
                        radioObj.each(function () {
                            var thisObj = $(this);
                            if (thisObj.val() == data) {
                                thisObj.prop("checked", true);
                            }
                            else {
                                thisObj.prop("checked", false);
                            }
                        });
                    }
                    else if (Elems.is("td")) {
                        Elems.text(data);
                        if (typeof (Elems.attr("title")) != "undefined") {
                            Elems.attr("title", data);
                        }
                    }
                    else {
                    }
                };
                function fillEncodeAttr(data, OBJIDs, Clone) {
                    if ($.isPlainObject(data)) {
                        $.each(OBJIDs, function (i, obj) {
                            if (data[obj] != undefined && data[obj]["encode"] != undefined) {
                                var encodePara = data[obj]["encode"].split(",");
                                for (var i in encodePara) {
                                    $("input[id^=" + encodePara[i] + "]", Clone).attr("encode", "1");
                                }
                            }
                        });
                    }
                    else {
                        $(data).find("encode").each(function () {
                            var encodePara = $(this).text().split(",");
                            for (var i in encodePara) {
                                $("input[id^=" + encodePara[i] + "]", Clone).attr("encode", "1");
                            }
                        });
                    }
                }
                function fillDataWithXML(data, OBJIDs, Clone, suffix, splitter) {
                    for (var i = 0; i < OBJIDs.length; i++) {
                        var OBJID = OBJIDs[i];
                        var OBJIDSplit = OBJID.split(":");
                        var OBJIDIndex = 0;
                        var isSplitterExist = 0;
                        if (OBJIDSplit.length == 2) {
                            OBJID = OBJIDSplit[0];
                            OBJIDIndex = parseInt(OBJIDSplit[1]);
                            isSplitterExist = 1;
                        }
                        var OBJs = $(data).find(OBJID);
                        if (OBJs.length == 0) {
                            continue;
                        }
                        var OBJ;
                        if (OBJIDIndex < OBJs.length) {
                            OBJ = OBJs.get(OBJIDIndex);
                        }
                        else {
                            continue;
                        }
                        var instances;
                        if (1 == isSplitterExist) {
                            instances = $("Instance", OBJ);
                        }
                        else {
                            instances = $("Instance", OBJs);
                        }
                        if (instances.length <= suffix
                            || suffix < 0) {
                            consoleLog("suffix off normal upper!!");
                            continue;
                        }
                        var InstOBJ = instances.eq(suffix);
                        InstOBJ.find("ParaName").each(function () {
                            var ParaName = $(this).text();
                            var ParaValue = $(this).next().text();
                            var Elems = $("[id^='" + ParaName + splitter + "']", Clone);
                            if (Elems.length == 0) {
                                Elems = $("[id='" + ParaName + "']", Clone);
                            }
                            if (Elems.length > 0) {
                                if (Elems.length > 1) {
                                    consoleLog("this ele id is duplicate[" + Elems.attr("id") + "]");
                                }
                                Elems.fillDataByType(ParaValue);
                            }
                            else {
                                if ("_InstID" != ParaName) {
                                    consoleLog("XML ParaName(" + ParaName + ") cannot map to HTML "
                                        + "by fillDataByType, so it may be useless, "
                                        + "web security require deleting it!");
                                }
                            }
                        });
                    }
                }
                function fillDataWithJSON(data, OBJIDs, Clone, suffix, splitter) {
                    for (var i = 0; i < OBJIDs.length; i++) {
                        var OBJID = OBJIDs[i];
                        var OBJIDSplit = OBJID.split(":");
                        var OBJIDIndex = 0;
                        var isSplitterExist = 0;
                        if (OBJIDSplit.length == 2) {
                            OBJID = OBJIDSplit[0];
                            isSplitterExist = 1;
                        }
                        var OBJs = $(data).find(OBJID);
                        if (data[OBJID] == undefined) {
                            continue;
                        }
                        var instances = data[OBJID]["Instance"];
                        if (instances.length <= suffix
                            || suffix < 0) {
                            consoleLog("suffix off normal upper!!");
                            continue;
                        }
                        var InstOBJ = instances[suffix];
                        for (var key in InstOBJ) {
                            var ParaName = key;
                            var ParaValue = InstOBJ[key];
                            var Elems = $("[id^='" + ParaName + splitter + "']", Clone);
                            if (Elems.length == 0) {
                                Elems = $("[id='" + ParaName + "']", Clone);
                            }
                            if (Elems.length > 0) {
                                if (Elems.length > 1) {
                                    consoleLog("this ele id is duplicate[" + Elems.attr("id") + "]");
                                }
                                Elems.fillDataByType(ParaValue);
                            }
                            else {
                                if ("_InstID" != ParaName) {
                                    consoleLog("json ParaName(" + ParaName + ") cannot map to HTML "
                                        + "by fillDataByType, so it may be useless, "
                                        + "web security require deleting it!");
                                }
                            }
                        }
                    }
                }
                function fillData(data, OBJIDs, Clone, suffix, splitter) {
                    if ($.isPlainObject(data)) {
                        fillDataWithJSON(data, OBJIDs, Clone, suffix, splitter);
                    }
                    else {
                        fillDataWithXML(data, OBJIDs, Clone, suffix, splitter);
                    }
                }
                jQuery.fn.fillDataByOBJID = function (data, OBJIDs, Clone, suffix, splitter) {
                    if (undefined == splitter) {
                        splitter = ":";
                    }
                    fillEncodeAttr(data, OBJIDs, Clone);
                    fillData(data, OBJIDs, Clone, suffix, splitter);
                    $(".SpecialPassword", Clone).each(function (i) {
                        $(this).val("						");
                    });
                };
                jQuery.fn.InstantializeForTemplateBox = function (data, OBJIDs, container) {
                    for (var i = 0; i < OBJIDs.length; i++) {
                        var OBJID = OBJIDs[i];
                        var OBJs = $(data).find(OBJID);
                        if (OBJs.length == 0) {
                            continue;
                        }
                        var ruleTemplate = $("[id='" + OBJID + "']._LuQuid_TempalteBox", container);
                        if (ruleTemplate.length == 0) {
                            continue;
                        }
                        $("[id^='" + OBJID + "_']._LuQuid_TempalteBox", container).remove();
                        var subWidget = ruleTemplate.find("*[id!='']");
                        subWidget.removeClass("PostIgnore");
                        var instances = $("Instance", OBJs);
                        var ruleNum = instances.length;
                        for (var i = 0; i < ruleNum; i++) {
                            var clone = ruleTemplate.cloneWithSuffix(i, "_", true);
                            ruleTemplate.before(clone);
                            var DataOBJID = [OBJID];
                            clone.fillDataByOBJID(data, DataOBJID, clone, i, "_");
                            clone.showIt(true);
                        }
                        $("[id='" + OBJID + "._OBJ_InstNUM']", container).val(ruleNum);
                        var templateInstID = $("[id='" + OBJID + "._OBJ_InstID']", container);
                        templateInstID.addClass("PostIgnore");
                        subWidget.addClass("PostIgnore");
                    }
                };
                jQuery.fn.FillDataOnlyForTemplateBox = function (data, OBJIDs, container) {
                    for (var i = 0; i < OBJIDs.length; i++) {
                        var OBJID = OBJIDs[i];
                        var OBJs = $(data).find(OBJID);
                        if (OBJs.length == 0) {
                            continue;
                        }
                        var ruleTemplate = $("[id='" + OBJID + "']._LuQuid_TempalteBox", container);
                        if (ruleTemplate.length == 0) {
                            continue;
                        }
                        $("[id^='" + OBJID + "_']._LuQuid_TempalteBox", container).each(function () {
                            var instObj = $(this);
                            var instId = instObj.find("[id^='" + OBJID + "._OBJ_InstID']").val();
                            var index = -1;
                            var instances = $("Instance", OBJs);
                            var ruleNum = instances.length;
                            for (var i = 0; i < ruleNum; i++) {
                                var instIdName = OBJID + "._OBJ_InstID";
                                var ToOperParaArray = {};
                                ToOperParaArray[instIdName] = {
                                    ValueOrigin: ""
                                };
                                xmlParaInInstOperate(data, OBJID, i, ToOperParaArray);
                                var ruleInstId = ToOperParaArray[instIdName].ValueOrigin;
                                if (instId == ruleInstId) {
                                    index = i;
                                    break;
                                }
                            }
                            if (index > -1) {
                                var DataOBJID = [OBJID];
                                instObj.fillDataByOBJID(data, DataOBJID, instObj, index, "_");
                            }
                            else {
                                consoleLog("instId(" + instId + ") cannot match xml instance");
                            }
                        });
                    }
                };
                jQuery.fn.createPageDataByClone = function (RuleNum, DataOBJID, data, fillDataByCustom) {
                    var Head = $(this);
                    var HeadID = Head.attr("id");
                    var TemplateOBJ = $("#template_" + HeadID, Head);
                    $("#_InstNum", Head).val(RuleNum);
                    for (var i = 0; i < RuleNum; i++) {
                        var clone = TemplateOBJ.cloneWithSuffix(i);
                        TemplateOBJ.before(clone);
                        clone.fillDataByOBJID(data, DataOBJID, clone, i);
                        if ($.isFunction(fillDataByCustom)) {
                            fillDataByCustom(i, clone);
                        }
                        else {
                            clone.trigger("fillDataByCustom", [i, clone]);
                        }
                        clone.showIt(true);
                    }
                };
                jQuery.fn.hasError = function (data, location) {
                    var ContentContainer = $(this);
                    var cmapiErrorContainer;
                    var ErrorString = "";
                    var ErrorParam = "";
                    if ($.isPlainObject(data)) {
                        if (data.IF_ERRORSTR == undefined || data.IF_ERRORPARAM == undefined) {
                            consoleLog("[hasError:]json cannot find IF_ERRORSTR or IF_ERRORPARAM");
                            return 1;
                        }
                        ErrorString = data.IF_ERRORSTR;
                        ErrorParam = data.IF_ERRORPARAM;
                    }
                    else {
                        if ($("IF_ERRORSTR", $(data)).length <= 0 || $("IF_ERRORPARAM", $(data)).length <= 0) {
                            consoleLog("[hasError:]xml cannot find IF_ERRORSTR or IF_ERRORPARAM");
                            return 1;
                        }
                        ErrorString = $("IF_ERRORSTR", $(data)).text();
                        ErrorParam = $("IF_ERRORPARAM", $(data)).text();
                    }
                    if (!location) {
                        location = "errorHint";
                    }
                    if (location == "externErrorHint") {
                        cmapiErrorContainer = $(".externErrorHint", ContentContainer);
                    }
                    else {
                        cmapiErrorContainer = $("." + location, ContentContainer);
                    }
                    if (ErrorString == "SUCC") {
                        cmapiErrorContainer.showIt(false);
                        return 0;
                    }
                    else if (ErrorString == "SessionTimeout") {
                        top.location.href = top.location.href;
                        return 1;
                    }
                    else {
                        var cmapiErrorContainerHtml = "";
                        var paraString = "";
                        if (ErrorParam != "SUCC") {
                            var LabelFindResult = 0;
                            ErrorString = "Operação atual é inválido, verifique se {0} é legal. ";
                            var paraLabel = ContentContainer.find("label[for^='" + ErrorParam + "\\:']");
                            if (paraLabel.length <= 0) {
                                paraLabel = ContentContainer.find("label[for='" + ErrorParam + "']");
                            }
                            if (paraLabel.length > 0) {
                                paraLabel.each(function () {
                                    var labelTmp = $(this);
                                    if (!labelTmp.hasClass("error")) {
                                        paraString = labelTmp.text();
                                        LabelFindResult = 1;
                                        return false;
                                    }
                                });
                            }
                            if (LabelFindResult == 0) {
                                ErrorString = "A operação atual é inválida, por favor, verifique os parâmetros de configuração.";
                            }
                            cmapiErrorContainerHtml = ErrorString.format(paraString);
                        }
                        else {
                            if ("FAIL" == ErrorString
                                || "Operação atual é inválido, verifique se {0} é legal. " == ErrorString) {
                                ErrorString = "A operação atual é inválida, por favor, verifique os parâmetros de configuração.";
                            }
                            cmapiErrorContainerHtml = ErrorString;
                        }
                        $("span", cmapiErrorContainer).text(cmapiErrorContainerHtml);
                        cmapiErrorContainer.showIt(true);
                        return 1;
                    }
                };
                jQuery.fn.ShouldPostIgnore = function () {
                    if ($(this).hasClass("PostIgnore")) {
                        return true;
                    }
                    return false;
                };
                jQuery.fn.InitialPostData = function (actionType) {
                    var AND = "&";
                    var template = $(this);
                    var PostData = "IF_ACTION=" + actionType;
                    var cryptoKey = randomNum(16);
                    var cryptoIv = randomNum(16);
                    var needEncode = false;
                    var formInputContent = template.find("input,select,textarea");
                    formInputContent.each(function (key) {
                        var Elems = $(this);
                        if (Elems.ShouldPostIgnore()) {
                            if (Elems.attr("encode") == "1") {
                                needEncode = true;
                            }
                            return true;
                        }
                        var ElemsID = Elems.attr("id");
                        if (typeof (ElemsID) != "string") {
                            return true;
                        }
                        if (Elems.attr("type") == "radio") {
                            if (Elems.is(':checked')) {
                                ElemsID = Elems.attr("name");
                            }
                            else {
                                return true;
                            }
                        }
                        var ElemsMainID = colonStripping(ElemsID);
                        var ElemsValue = "";
                        if (Elems.is("input")) {
                            switch (Elems.attr("type")) {
                                case "hidden":
                                    {
                                        if (Elems.attr("_LuQUID_splitMACID") != undefined) {
                                            var splitMACID = Elems.attr("_LuQUID_splitMACID");
                                            Elems.FillIPorMacDataCombination(splitMACID, ":", 6);
                                        }
                                        else if (Elems.attr("_LuQUID_splitIPID") != undefined) {
                                            var splitIPID = Elems.attr("_LuQUID_splitIPID");
                                            Elems.FillIPorMacDataCombination(splitIPID, ".", 4);
                                        }
                                        ElemsValue = Elems.val();
                                        break;
                                    }
                                case "text":
                                case "password":
                                case "radio":
                                    {
                                        ElemsValue = Elems.val();
                                        if (commConf.setEncode && Elems.attr("encode") == "1") {
                                            ElemsValue = encodeParaValue(ElemsValue, cryptoKey, cryptoIv);
                                            needEncode = true;
                                        }
                                        break;
                                    }
                                case "checkbox":
                                    {
                                        if (Elems.is(':checked')) {
                                            ElemsValue = 1;
                                        }
                                        else {
                                            ElemsValue = 0;
                                        }
                                        break;
                                    }
                                default:
                                    {
                                        break;
                                    }
                            }
                        }
                        else if (Elems.is("select")) {
                            ElemsValue = Elems.val();
                        }
                        else if (Elems.is("textarea") && Elems.attr("needPost") == "needPost") {
                            ElemsValue = Elems.val();
                        }
                        else {
                            consoleLog("when create post data, find not support elements type!!");
                        }
                        var NameValueJson = {
                            "ElemsMainID": ElemsMainID,
                            "ElemsValue": ElemsValue
                        };
                        template.trigger("PostDataChangeByCustom", [NameValueJson, template]);
                        var RealElemsValue = encodeURIComponent(NameValueJson.ElemsValue);
                        PostData += AND + ElemsMainID + "=" + RealElemsValue;
                    });
                    if (needEncode) {
                        PostData += AND + "encode=" + encodeURIComponent(encodeKey(cryptoKey, cryptoIv));
                    }
                    return PostData;
                };
                function RefreshClickHandle(Head) {
                    $(".Btn_refresh", Head).each(function () {
                        $(this).unbind("click");
                        $(this).bind("click", function () {
                            var buttonOBJ = $(this);
                            if (buttonOBJ.hasClass("disableBtn")
                                || buttonOBJ.hasClass("disableLongBtn")) {
                                return;
                            }
                            var HeadID = Head.attr("id");
                            Head.find("[id^='template_" + HeadID + "_']").each(function () {
                                $(this).remove();
                            });
                            var ServerAddr = $("address span", Head).text();
                            Head.dataTransfer(ServerAddr,
                                "GET",
                                Head.succfunction,
                                Head.failfunction,
                                undefined,
                                true);
                        });
                    });
                }
                function initialStatusArea(Head) {
                    if (0 == $("._LuQUID_STATUS_OBJID", Head).length) {
                        return;
                    }
                    var OBJID = [];
                    var OBJDOMs = $("._LuQUID_STATUS_OBJID>li", Head);
                    OBJDOMs.each(function () {
                        var identity = $(this).text();
                        OBJID.push(identity);
                    });
                    var isMultiInst = $(".maxInstNum", Head).val();
                    var ServerAddr = $("address span", Head).text();
                    Head.succfunction = function (data) {
                        if (Head.hasError(data, "externErrorHint") == 0) {
                            Head.trigger("changeXMLDataBeforeFillData", [data]);
                            var XMLOBJ = $(data).find(OBJID[0]);
                            var RuleNum = $("Instance", XMLOBJ).length;
                            if (RuleNum == 0) {
                                $(".noDataHint", Head).showIt(true);
                                $(".form_content", Head).showIt(false);
                            }
                            else {
                                $(".noDataHint", Head).showIt(false);
                                $(".form_content", Head).showIt(true);
                                if (isMultiInst == 0) {
                                    Head.fillDataByOBJID(data, OBJID, Head, 0);
                                    Head.trigger("fillDataByCustom", [0, Head]);
                                    var template = $("[id^='template_']", Head);
                                    template.trigger("fillDataByCustom", [0, template]);
                                    template.showIt(true);
                                }
                                else {
                                    Head.fillDataByCustom = undefined;
                                    Head.createPageDataByClone(RuleNum, OBJID, data,
                                        Head.fillDataByCustom);
                                }
                                colorTblRow(".colorTbl", "even", Head);
                            }
                        }
                    };
                    RefreshClickHandle(Head);
                    if ($(".collapBarWithDataTrans", Head).length <= 0) {
                        Head.dataTransfer(ServerAddr,
                            "GET",
                            Head.succfunction);
                    }
                    else {
                        initial_collapBarWithDataTrans(Head);
                    }
                }
                function initial_special_password(Head) {
                    $(".SpecialPassword", Head).each(function () {
                        $(this).mouseup(function () {
                            if (this.focused) {
                                this.focused = false;
                                return false;
                            }
                        });
                    });
                    $(".SpecialPassword", Head).each(function () {
                        $(this).focus(function () {
                            this.select();
                            this.focused = true;
                        });
                    });
                }
                function initial_button(buttonType, Head, IfShowWaitTip) {
                    if (!Head) {
                        consoleLog("incoming para:Head is not defined!");
                        return;
                    }
                    var buttonClass = "";
                    var eventHandler = "";
                    if (buttonType == "Apply") {
                        buttonClass = "Btn_apply";
                        eventHandler = "fillDataByApplyResult";
                    }
                    else if (buttonType == "Cancel") {
                        buttonClass = "Btn_cancel";
                        eventHandler = "fillDataByCancelResult";
                    }
                    else if (buttonType == "Delete") {
                        buttonClass = "Btn_delete";
                        eventHandler = "fillDataByDeleteResult";
                    }
                    else {
                    }
                    $("." + buttonClass, Head).each(function () {
                        $(this).unbind("click");
                        $(this).bind("click", function (event) {
                            var buttonOBJ = $(this);
                            if (buttonOBJ.hasClass("disableBtn")
                                || buttonOBJ.hasClass("disableLongBtn")) {
                                return;
                            }
                            var Head = buttonOBJ.parents(".HeadDIV");
                            var template = buttonOBJ.parents("[id^='template']");
                            var ActionBeforePostResult = { result: "Process" };
                            if (buttonType == "Apply") {
                                var formOBJ = $(".form_content", template);
                                if (formOBJ.length > 0 && false == formOBJ.valid()) {
                                    return;
                                }
                                else {
                                    var formObj = $(".form_content", template);
                                    var txtInputObjs = $("input[type='text']", formObj);
                                    txtInputObjs.each(function () {
                                        var obj = $(this);
                                        var rules = obj.rules();
                                        if (rules.integer) {
                                            var intStr = obj.val();
                                            var sign, digits;
                                            if (intStr.charAt(0) == '-') {
                                                sign = "-";
                                                digits = intStr.substring(1);
                                            }
                                            else {
                                                sign = "";
                                                digits = intStr;
                                            }
                                            while (digits.charAt(0) == '0' && digits.length > 1) {
                                                digits = digits.substring(1);
                                            }
                                            intStr = sign + digits;
                                            obj.val(intStr);
                                        }
                                    });
                                }
                                var IPMACCheckResult = { result: "checkOK" };
                                template.trigger("wholeIPorMACCheck", [template, IPMACCheckResult]);
                                if (IPMACCheckResult.result != "checkOK") {
                                    return;
                                }
                            }
                            template.trigger("ActionBeforePostByCustom", [template, ActionBeforePostResult]);
                            if (ActionBeforePostResult.result != "Process") {
                                return;
                            }
                            var ThisInstID = $("[id^='_InstID']", template).val();
                            if (ThisInstID == undefined) {
                                var luquidObjUl = $("._LuQUID_CONFIG_OBJID", Head);
                                var objId = $("li", luquidObjUl).eq(0).text();
                                var instId = objId + "\\._OBJ_InstID";
                                ThisInstID = $("[id^='" + instId + "']", template).val();
                            }
                            if (ThisInstID == -1
                                && (buttonType == "Cancel" || buttonType == "Delete")) {
                                template.remove();
                                return;
                            }
                            var ServerAddr = $("address span", Head).text();
                            var IfShowWaitTipTmp = IfShowWaitTip;
                            if (IfShowWaitTipTmp == undefined) {
                                IfShowWaitTipTmp = true;
                            }
                            dataPost(buttonType, eventHandler, ServerAddr, template, undefined, IfShowWaitTipTmp);
                        });
                    });
                }
                function dataPost(actionType, PostSuccHandler, ServerAddr, template, PostData, IfShowWaitTip, asyncFlag) {
                    var IfShowWaitTipTmp = IfShowWaitTip;
                    if (IfShowWaitTipTmp == undefined) {
                        IfShowWaitTipTmp = true;
                    }
                    if (asyncFlag == undefined) {
                        asyncFlag = true;
                    }
                    var PostDataTmp = "";
                    if (PostData == undefined) {
                        template.trigger("hiddenValueChangeByCustom", [template, actionType]);
                        PostDataTmp = template.InitialPostData(actionType);
                    }
                    else {
                        PostDataTmp = PostData;
                    }
                    PostDataTmp += "&_sessionTOKEN=" + _sessionTmpToken;
                    var procData = true;
                    if (PostDataTmp.indexOf("%20") >= 0) {
                        procData = false;
                    }
                    var selfHeader = {};
                    if (commConf.IntegCheck) {
                        var degistStr = sha256(PostDataTmp);
                        selfHeader["Check"] = asyEncode(degistStr);
                    }
                    if (IfShowWaitTipTmp == true) {
                        showWaitTip(true);
                    }
                    $.ajax({
                        url: ServerAddr,
                        type: 'POST',
                        data: PostDataTmp,
                        headers: selfHeader,
                        processData: procData,
                        async: asyncFlag,
                        timeout: 30000,
                        cache: false,
                        error: function () {
                            var ajaxPostFailHint = "O servidor não está disponível agora. Atualize a página para recarregar. ";
                            var errorContainer = $(".errorHint", template);
                            var changeArea = $(".ChangeArea", template);
                            var collapsibleInst = $(".collapsibleInst", template);
                            if (errorContainer != undefined) {
                                $("span", errorContainer).text(ajaxPostFailHint);
                                errorContainer.showIt(true);
                                if (changeArea != undefined) {
                                    changeArea.showIt(true);
                                }
                                if (collapsibleInst != undefined) {
                                    collapsibleInst.addClass("instNameExp");
                                }
                                template.showIt(true);
                            }
                            showWaitTip(false);
                        },
                        success: function (data) {
                            _LuQUID_setTemplateDefEvents(template, PostSuccHandler);
                            template.trigger(PostSuccHandler, [data, template]);
                            if (template.hasError(data, "_noExist") == 0) {
                                $(".SpecialPassword", template).each(function (i) {
                                    $(this).val("						");
                                });
                            }
                            var formObj = $(".form_content", template);
                            var errObjs = $(".errorLabelWraper > .error", formObj);
                            errObjs.attr("style", "display:none");
                            if (IfShowWaitTipTmp == true) {
                                showWaitTip(false);
                            }
                        }
                    });
                }
                function homedeletedataPost(actionType, PostSuccHandler, ServerAddr, template, PostData, IfShowWaitTip, asyncFlag) {
                    var IfShowWaitTipTmp = IfShowWaitTip;
                    if (IfShowWaitTipTmp == undefined) {
                        IfShowWaitTipTmp = true;
                    }
                    if (asyncFlag == undefined) {
                        asyncFlag = true;
                    }
                    var deleteid = $("[id^='Delete']", template).attr('id');
                    var idArr = deleteid.split(":");
                    var tmpinsid = idArr[idArr.length - 1];
                    var insid = parseInt(tmpinsid, 10) + 1;
                    var PostDataTmp = "IF_ACTION=" + actionType + "&" + "_InstID=" + parseInt(insid, 10);
                    if (typeof (_sessionTmpToken) != "undefined") {
                        PostDataTmp += "&_sessionTOKEN=" + _sessionTmpToken;
                    }
                    if (IfShowWaitTipTmp == true) {
                        showWaitTip(true);
                    }
                    $.ajax({
                        url: ServerAddr,
                        type: 'POST',
                        data: PostDataTmp,
                        async: asyncFlag,
                        timeout: 30000,
                        cache: false,
                        error: function () {
                            var ajaxPostFailHint = "O servidor não está disponível agora. Atualize a página para recarregar. ";
                            var homeWrapperObj = template.parent("[id^='homeWrapper']");
                            var errorContainertmp = $(".lanErr", homeWrapperObj);
                            var errorContainer = $(".errorHint", errorContainertmp);
                            if (errorContainer != undefined) {
                                $("span", errorContainer).text(ajaxPostFailHint);
                                errorContainer.showIt(true);
                                template.showIt(true);
                            }
                            showWaitTip(false);
                        },
                        success: function (data) {
                            template.trigger(PostSuccHandler);
                            if (IfShowWaitTipTmp == true) {
                                showWaitTip(false);
                            }
                        }
                    });
                }
                function focusAndSelectInput(jqObj) {
                    var disValue = jqObj.attr("disabled");
                    if (disValue != "disabled" && disValue != true) {
                        jqObj.focus();
                        jqObj.select();
                    }
                }
                function FocusAutoJump(obj, value, e) {
                    var objJQ = $(obj);
                    var prevOBJ = objJQ.prev("input");
                    var nextOBJ = objJQ.next("input");
                    var valLen = value.length;
                    var keynum;
                    if (window.event) {
                        keynum = e.keyCode;
                    }
                    else if (e.which) {
                        keynum = e.which;
                    }
                    var temp = value.substring(valLen - 1, valLen);
                    if ("." == temp && objJQ.hasClass("ip") && 0 != valLen) {
                        objJQ.val(value.substring(0, valLen - 1));
                        if ("." != value) {
                            focusAndSelectInput(nextOBJ);
                        }
                    }
                    if (valLen == obj.maxLength) {
                        if (nextOBJ.length <= 0) {
                            return;
                        }
                        if (9 != keynum && 16 != keynum && 35 != keynum && 36 != keynum &&
                            37 != keynum && 38 != keynum && 39 != keynum && 40 != keynum &&
                            46 != keynum && 8 != keynum && objJQ.valid() == 1) {
                            focusAndSelectInput(nextOBJ);
                        }
                    }
                    else if (valLen == 0 && 37 == keynum) {
                        if (prevOBJ.length <= 0) {
                            return;
                        }
                        focusAndSelectInput(prevOBJ);
                    }
                    else {
                        return;
                    }
                }
                function autoJumpBack(obj, value, e) {
                    var objJQ = $(obj);
                    var prevOBJ = objJQ.prev("input");
                    var nextOBJ = objJQ.next("input");
                    var valLen = value.length;
                    var keynum;
                    if (window.event) {
                        keynum = e.keyCode;
                    }
                    else if (e.which) {
                        keynum = e.which;
                    }
                    if (8 == keynum && valLen == 0) {
                        if (prevOBJ.length <= 0) {
                            return;
                        }
                        focusAndSelectInput(prevOBJ);
                    }
                }
                jQuery.fn.FillIPorMacDataBySplit = function (subid, Delimiter, length) {
                    var IPOBJ = $(this);
                    if (IPOBJ.length == 0) {
                        return;
                    }
                    var containerOBJ = IPOBJ.parents("[id^='template_']");
                    var value = IPOBJ.val();
                    if (!value) {
                        return;
                    }
                    var temp = value.split(Delimiter);
                    if (length != temp.length) {
                        return;
                    }
                    for (var i = 0; i < length; i++) {
                        var fillOBJ = $("[id^='" + subid + i + "']", containerOBJ);
                        fillOBJ.val(temp[i]);
                    }
                };
                jQuery.fn.FillIPorMacDataCombination = function (subid, Delimiter, length) {
                    var IPOBJ = $(this);
                    if (IPOBJ.length == 0) {
                        return;
                    }
                    var containerOBJ = IPOBJ.parents("[id^='template_']");
                    var temp = "";
                    for (var i = 0; i < length; i++) {
                        var tempObj = $("[id^='" + subid + i + "']", containerOBJ);
                        if (0 != i) {
                            temp += Delimiter;
                        }
                        var tempValue = tempObj.val();
                        if (!tempValue) {
                            tempValue = "";
                        }
                        temp += tempValue;
                        tempObj.addClass("PostIgnore");
                    }
                    IPOBJ.val(temp);
                    return temp;
                };
                jQuery.fn.checkIPorMACbyApply = function (checkIPorMACObj, template, IPMACCheckResult) {
                    var breakFlag = 0;
                    $.each(checkIPorMACObj, function (key, value) {
                        if (breakFlag != 0) {
                            return false;
                        }
                        if ($("[id^='sub_" + key + "']", template).is(":visible") != true) {
                            return true;
                        }
                        var labelId = value.labelId;
                        var paraName = "";
                        var paraNameObj = template.find("label[for^='" + labelId + "\\:']");
                        if (paraNameObj.length <= 0) {
                            paraNameObj = template.find("label[for='" + labelId + "']");
                        }
                        if (paraNameObj.length > 0) {
                            paraNameObj.each(function () {
                                var labelTmp = $(this);
                                if (labelTmp.hasClass("error")) {
                                    return true;
                                }
                                paraName = labelTmp.text();
                                return false;
                            });
                        }
                        var elementType = value.eleType;
                        if (elementType == "IP") {
                            var IPObj = $("[id^='" + key + "']", template);
                            IPObj.FillIPorMacDataCombination("sub_" + key, ".", 4);
                            var ipValue = IPObj.val();
                            if (value.rules != undefined) {
                                $.each(value.rules, function (k, v) {
                                    var ipRet = checkWholeIPv4(k, v, ipValue, template);
                                    if (ipRet[0] == false) {
                                        var errMsg = getMsgofWholeMACIPCheck(ipRet, value, ipValue, paraName);
                                        $(".errorHint", template).show();
                                        $(".errorHint span", template).text(errMsg);
                                        IPMACCheckResult.result = "checkFail";
                                        breakFlag = 1;
                                        return false;
                                    }
                                    else {
                                        $(".errorHint", template).hide();
                                    }
                                });
                            }
                        }
                        else if (elementType == "MAC") {
                            var MACObj = $("[id^='" + key + "']", template);
                            MACObj.FillIPorMacDataCombination("sub_" + key, ":", 6);
                            var macValue = MACObj.val();
                            if (value.rules != undefined) {
                                $.each(value.rules, function (k, v) {
                                    var macRet = checkWholeMac(k, v, macValue);
                                    if (macRet[0] == false) {
                                        var errMsg = getMsgofWholeMACIPCheck(macRet, value, macValue, paraName);
                                        $(".errorHint", template).show();
                                        $(".errorHint span", template).text(errMsg);
                                        IPMACCheckResult.result = "checkFail";
                                        breakFlag = 1;
                                        return false;
                                    }
                                    else {
                                        $(".errorHint", template).hide();
                                    }
                                });
                            }
                        }
                        else {
                            consoleLog("ElementType +'" + elementType + "' is not supported now!");
                        }
                    });
                };
                jQuery.fn.setPromptCheckJSON = function (checkJSONTempObj, template) {
                    var templateID = template.attr("id");
                    var instIndex = templateID.match(/\d+$/);
                    var suffix = "";
                    if (instIndex) {
                        suffix = ":" + instIndex;
                    }
                    var checkJSONInstObj = { "groups": {}, "rules": {}, "messages": {} };
                    if (checkJSONTempObj.groups != undefined) {
                        $.each(checkJSONTempObj.groups, function (key, value) {
                            var valJSONStr = value;
                            var idArr = value.split(" ");
                            for (var i = 0; i < idArr.length; i++) {
                                idArr[i] += suffix;
                            }
                            valJSONStr = idArr.join(" ");
                            var parameterJSON = eval("({'" + key + suffix + "':'" + valJSONStr + "'})");
                            $.extend(checkJSONInstObj.groups, parameterJSON);
                        });
                    }
                    if (checkJSONTempObj.rules != undefined) {
                        $.each(checkJSONTempObj.rules, function (key, value) {
                            var parameterJSON = {};
                            parameterJSON[key + suffix] = value;
                            $.extend(checkJSONInstObj.rules, parameterJSON);
                        });
                    }
                    if (checkJSONTempObj.messages != undefined) {
                        $.each(checkJSONTempObj.messages, function (key, value) {
                            var parameterJSON = {};
                            parameterJSON[key + suffix] = value;
                            $.extend(checkJSONInstObj.messages, parameterJSON);
                        });
                    }
                    var instForm = template.find("form");
                    instForm.validate(checkJSONInstObj);
                };
                function consoleLog(para) {
                    if (typeof window.console == "undefined") {
                        window.console = { log: function () { } };
                    }
                    window.console.log(para);
                }
                function getInstIndexByPath(data, OBJID, path) {
                    var instIndex = -1;
                    if ($.isPlainObject(data)) {
                        var instances = data[OBJID]["Instance"];
                        $.each(instances, function (i, v) {
                            var inst = v;
                            if (inst["_InstID"] != undefined && inst["_InstID"] == path) {
                                instIndex = i;
                            }
                        });
                    }
                    else {
                        var OBJ = $(data).find(OBJID);
                        var instances = $("Instance", OBJ);
                        instances.each(function (i) {
                            var inst = $(this);
                            inst.find("ParaName").each(function () {
                                var ParaName = $(this).text();
                                var ParaValue = $(this).next().text();
                                if (ParaName.match(/^_InstID/) != null
                                    && ParaValue == path) {
                                    instIndex = i;
                                }
                            });
                        });
                    }
                    return instIndex;
                }
                function xmlParaInInstOperate(data, OBJVal, InstIndex, ToOperParaArray) {
                    if ($.isPlainObject(data)) {
                        var instances = data[OBJVal]["Instance"];
                        var inst = instances[InstIndex];
                        for (var tmp in ToOperParaArray) {
                            if (inst[tmp] != undefined) {
                                ToOperParaArray[tmp].ValueOrigin = inst[tmp];
                                if (ToOperParaArray[tmp].setAction) {
                                    ToOperParaArray[tmp].setAction(inst, null, inst[tmp]);
                                }
                            }
                        }
                    }
                    else {
                        var OBJ = $(OBJVal, $(data));
                        var inst = $("Instance", OBJ).eq(InstIndex);
                        inst.find("ParaName").each(function () {
                            var ParaSelf = $(this);
                            var ParaValSelf = $(this).next();
                            var ParaName = ParaSelf.text();
                            var ParaValue = ParaValSelf.text();
                            for (var tmp in ToOperParaArray) {
                                if (tmp == ParaName) {
                                    ToOperParaArray[tmp].ValueOrigin = ParaValue;
                                    if (ToOperParaArray[tmp].setAction) {
                                        ToOperParaArray[tmp].setAction(ParaSelf, ParaValSelf, ParaValue);
                                    }
                                }
                            }
                        });
                    }
                }
                function getParaValueInXML(data, OBJID, InstIndex, paraNameIn) {
                    var paraValueOut = "N/A";
                    if ($.isPlainObject(data)) {
                        var instances = data[OBJID]["Instance"];
                        var inst = instances[InstIndex];
                        if (inst[paraNameIn] != undefined) {
                            paraValueOut = inst[paraNameIn];
                            if (commConf.getEncode && data[obj]["encode"] != undefined && data[obj]["encode"].indexOf(paraNameIn) != -1) {
                                paraValueOut = getDecodeValue(paraValueOut);
                            }
                        }
                    }
                    else {
                        var OBJ = $(data).find(OBJID);
                        var instances = $("Instance", OBJ);
                        var inst = instances.eq(InstIndex);
                        inst.find("ParaName").each(function () {
                            var ParaName = $(this).text();
                            var ParaValue = $(this).next().text();
                            if (ParaName == paraNameIn) {
                                paraValueOut = ParaValue;
                                $(data).find("encode").each(function () {
                                    if (commConf.getEncode && $(this).text().indexOf(paraNameIn) != -1) {
                                        paraValueOut = getDecodeValue(paraValueOut);
                                        return false;
                                    }
                                });
                                return false;
                            }
                        });
                    }
                    return paraValueOut;
                }
                function colorTblRow(tblClass, rowAttr, Head) {
                    $(tblClass + " .colorTblRow", Head).each(function () {
                        var thisRow = $(this);
                        thisRow.removeClass("colorRow");
                    });
                    var shouldPainted = true;
                    if (rowAttr == "even") {
                        shouldPainted = true;
                    }
                    else {
                        shouldPainted = false;
                    }
                    var allRows = $(tblClass + " .colorTblRow", Head);
                    allRows.each(function () {
                        var thisRow = $(this);
                        if (thisRow.css("display") != "none") {
                            if (true == shouldPainted) {
                                thisRow.addClass("colorRow");
                                shouldPainted = false;
                            }
                            else {
                                shouldPainted = true;
                            }
                        }
                    });
                }
                function reformString(inStr, splitNum) {
                    var strLen = inStr.length;
                    var outStr = "";
                    var arr = [];
                    var start = 0;
                    var end = 0;
                    if (strLen > 4) {
                        var flag = strLen % splitNum;
                        if (flag != 0) {
                            end = flag;
                        }
                        else {
                            end = start + splitNum;
                        }
                        for (var i = 0; end <= strLen; i++) {
                            arr[i] = inStr.slice(start, end);
                            start = end;
                            end = start + splitNum;
                        }
                        for (var j = 0; j < arr.length; j++) {
                            outStr = outStr + arr[j] + " ";
                        }
                        outStr = outStr.slice(0, (outStr.length - 1));
                    }
                    if (outStr == "") {
                        outStr = inStr;
                    }
                    return outStr;
                }
                function sec2HrMinSec(sec) {
                    if (sec == "") {
                        consoleLog("[sec2HrMinSec]sec is empty, please check if it's ok?! ");
                    }
                    var s, m, h;
                    s = parseInt(sec % 60);
                    m = parseInt(sec / 60, 10) % 60;
                    h = parseInt(sec / 3600, 10);
                    return (h + " h " + m + " min " + s + " s");
                }
                jQuery.fn.collapsibleInstTitleChange = function (referenceID) {
                    var ContainerOBJ = $(this);
                    var NameValue = "";
                    var nameSrcObj = $("[id^='" + referenceID + ":']", ContainerOBJ);
                    var eleType = nameSrcObj[0].type;
                    if (eleType == "select-one") {
                        NameValue = $("option:selected", nameSrcObj).text();
                    } else {
                        NameValue = nameSrcObj.val();
                    }
                    var instNameObj = $(".collapsibleInst", ContainerOBJ);
                    instNameObj.text(NameValue);
                    instNameObj.attr("title", NameValue);
                };
                function initialCtrlAllLink(containerOBJ) {
                    var AllObj = $(".AllOn, .AllOff", containerOBJ);
                    AllObj.unbind("click");
                    AllObj.click(function (event) {
                        var AllCtlItme = $(this);
                        var Head = AllCtlItme.parents(".HeadDIV");
                        var Template = AllCtlItme.parents("[id^='template_']");
                        var needCheck = 1;
                        var EleSelectValue;
                        if (AllCtlItme.hasClass("AllOn")) {
                            needCheck = 1;
                            EleSelectValue = 1;
                        }
                        else if (AllCtlItme.hasClass("AllOff")) {
                            needCheck = 0;
                            EleSelectValue = 0;
                        }
                        else {
                        }
                        if (AllCtlItme.attr("EleSelectValue")) {
                            EleSelectValue = AllCtlItme.attr("EleSelectValue");
                        }
                        $(":radio", Template).each(function () {
                            var RadioOBJ = $(this);
                            if (RadioOBJ.val() == EleSelectValue) {
                                RadioOBJ.prop("checked", true);
                            }
                            else {
                                RadioOBJ.prop("checked", false);
                            }
                        });
                        $(":checkbox", Template).each(function () {
                            var CheckboxOBJ = $(this);
                            if (needCheck == 1) {
                                CheckboxOBJ.prop("checked", true);
                            }
                            else {
                                CheckboxOBJ.prop("checked", false);
                            }
                        });
                    });
                }
                function ActionByApplyResult(data, template, TitleValueReferID) {
                    var isError = template.hasError(data);
                    if (isError == 0) {
                        $("span.__CheckPwdStrength", template).remove();
                        succHintShow(template);
                        if ($.isPlainObject(data)) {
                            if (data["_InstID"] != undefined) {
                                $("[id^='_InstID']", template).val(data["_InstID"]);
                            }
                        }
                        else {
                            var _InstIDOBJ = $(data).find("_InstID");
                            if (_InstIDOBJ.length > 0) {
                                $("[id^='_InstID']", template).val(_InstIDOBJ.text());
                            }
                        }
                        var headObj = template.parents(".HeadDIV");
                        var luquidObjUl = $("._LuQUID_CONFIG_OBJID", headObj);
                        $("li", luquidObjUl).each(function () {
                            var objId = $(this).text();
                            var ruleTemplate = $("[id='" + objId + "']._LuQuid_TempalteBox", template);
                            if (ruleTemplate.length > 0) {
                                return true;
                            }
                            var instIdSelector = objId + "\\._OBJ_InstID";
                            var instIDTag = $(data).find(instIdSelector);
                            if (instIDTag.length == 0) {
                                return true;
                            }
                            $("[id^='" + instIdSelector + "']", template).val(instIDTag.text());
                        });
                        if (TitleValueReferID != undefined) {
                            template.collapsibleInstTitleChange(TitleValueReferID);
                        }
                        $("textarea[_readonlycanberm]", template).attr("readonly", "readonly");
                        $("input[type!=button][_readonlycanberm],select[_readonlycanberm]", template).attr("disabled", "disabled")
                            .addClass("readonlyInputBg");
                        $(".Button[_readonlycanberm]", template).attr("disabled", "disabled").addClass("disableBtn");
                        $(".longBtn[_readonlycanberm]", template).attr("disabled", "disabled").addClass("disableLongBtn");
                    }
                    return isError;
                }
                function ActionByCancelResult(data, template, OBJIDForFillData, TitleValueReferID) {
                    var isError = template.hasError(data);
                    if (isError == 0) {
                        $("span.__CheckPwdStrength", template).remove();
                        template.fillDataByOBJID(data, OBJIDForFillData, template, 0);
                        template.FillDataOnlyForTemplateBox(data, OBJIDForFillData, template);
                        if (TitleValueReferID != undefined) {
                            template.collapsibleInstTitleChange(TitleValueReferID);
                        }
                    }
                    else {
                        $(".ChangeArea", template).showIt(true);
                        $(".collapsibleInst", template).addClass("instNameExp");
                    }
                    return isError;
                }
                function addInst(Head, InstNumOBJ) {
                    var HeadID = Head.attr("id");
                    var templateOBJ = $("#template_" + HeadID);
                    var suffix = InstNumOBJ.val();
                    var clone = templateOBJ.cloneWithSuffix(suffix);
                    if (!$("[_readonlycanberm]", clone).attr("hideattr"))
                        $("[_readonlycanberm]", clone).removeAttr("disabled readonly")
                            .removeClass("readonlyInputBg disableBtn disableLongBtn");
                    templateOBJ.before(clone);
                    InstNumOBJ.val(parseInt(suffix) + 1);
                    templateOBJ.trigger("ActionBeforeAddInst", [clone]);
                    clone.showIt(true);
                    $(".collapsibleInst", clone).addClass("instNameExp");
                    $(".ChangeArea", clone).showIt(true);
                }
                function IfCreateInstChk(Head, InstNumOBJ, AddInstLink) {
                    var ExistInst = 0;
                    $("[id^='template_']", Head).each(function () {
                        if ($(this).css("display") == "block") {
                            ExistInst = 1;
                            return false;
                        }
                    });
                    if (ExistInst == 0
                        && AddInstLink.length > 0) {
                        return true;
                    }
                    return false;
                }
                function collapBarAction(collapBar) {
                    var Head = collapBar.parents(".HeadDIV");
                    var HeadID = Head.attr("id");
                    var containerMainID = HeadID + "_container";
                    var UnderControlContainer = $("#" + containerMainID, Head);
                    var template = collapBar.parents("[id^='template_']");
                    var selector = "[id^='" + containerMainID + "']";
                    var containerInTemp = $(selector, template);
                    var containerLen = containerInTemp.length;
                    if (containerLen > 0) {
                        UnderControlContainer = containerInTemp;
                    }
                    if (UnderControlContainer.is(":visible")) {
                        UnderControlContainer.showIt(false);
                        collapBar.removeClass("collapsibleBarExp");
                    }
                    else {
                        UnderControlContainer.showIt(true);
                        collapBar.addClass("collapsibleBarExp");
                    }
                    var InstNumOBJ = $("#_InstNum", Head);
                    var AddInstLink = Head.find(".addInst");
                    if (IfCreateInstChk(Head, InstNumOBJ, AddInstLink)) {
                        addInst(Head, InstNumOBJ);
                    }
                }
                function initial_collapBarWithDataTrans(Head) {
                    var UnderControlContainer = $("#" + Head.attr("id") + "_container");
                    UnderControlContainer.hide();
                    $(".collapBarWithDataTrans", Head).click(function (event) {
                        event.preventDefault();
                        var collapBar = $(this);
                        if ($("#DataHasBeenGot", Head).val() == 0) {
                            showWaitTip(true);
                            setTimeout(function () {
                                var ServerAddr = $("address span", Head).text();
                                Head.dataTransfer(ServerAddr,
                                    "GET",
                                    Head.succfunction,
                                    undefined,
                                    undefined,
                                    false
                                );
                                $("#DataHasBeenGot", Head).val(1);
                                collapBarAction(collapBar);
                            }, 2);
                        }
                        else {
                            collapBarAction(collapBar);
                        }
                    });
                }
                function initial_CollapsibleBar() {
                    $(".collapsibleBar").each(function () {
                        var HeadID = $(this).parents(".HeadDIV").attr("id");
                        var UnderControlContainer = $("#" + HeadID + "_container");
                        UnderControlContainer.hide();
                    });
                    $(".collapsibleBar").each(function () {
                        var collapsibleBar = $(this);
                        collapsibleBar.click(function (event) {
                            event.preventDefault();
                            var collapBar = $(this);
                            collapBarAction(collapBar);
                        });
                    });
                }
                function initial_addInstLink() {
                    $(".addInst").each(function (event) {
                        var addInstOBJ = $(this);
                        addInstOBJ.unbind("click");
                        addInstOBJ.click(function (event) {
                            var Head = $(this).parents(".HeadDIV");
                            var InstNumOBJ = $("#_InstNum", Head);
                            addInst(Head, InstNumOBJ);
                        });
                    });
                }
                function _LuQUID_template_ApplyDefEventFunc(event, data, template) {
                    return ActionByApplyResult(data, template);
                }
                function _LuQUID_template_CancelDefEventFunc(event, data, template) {
                    var OBJID = [];
                    var Head = template.parents(".HeadDIV");
                    var OBJDOMs = $("._LuQUID_CONFIG_OBJID>li", Head);
                    OBJDOMs.each(function () {
                        var identity = $(this).text();
                        OBJID.push(identity);
                    });
                    ActionByCancelResult(data, template, OBJID);
                    template.trigger("fillDataByCustom", [0, template, data]);
                }
                function _LuQUID_template_DeleteDefEventFunc(event, data, template) {
                    if (template.hasError(data) == 0) {
                        template.remove();
                    }
                    else {
                        $(".ChangeArea", template).showIt(true);
                    }
                }
                function _LuQUID_template_InstSwitchDefEventFunc(event, data, template) {
                    if (template.hasError(data) == 0) {
                        return;
                    }
                    $(".ChangeArea", template).showIt(true);
                    $(".collapsibleInst", template).addClass("instNameExp");
                }
                var _LuQUID_template_DefEventFuncMap = {
                    "fillDataByApplyResult": _LuQUID_template_ApplyDefEventFunc,
                    "fillDataByCancelResult": _LuQUID_template_CancelDefEventFunc,
                    "fillDataByDeleteResult": _LuQUID_template_DeleteDefEventFunc,
                    "fillDataByInstSwitchResult": _LuQUID_template_InstSwitchDefEventFunc
                };
                function _LuQUID_setTemplateDefEvents(template, PostSuccHandler) {
                    var LuquidObj = $(template).parent().find("address").find("[class^='_LuQUID_']");
                    if (LuquidObj.length == 0) {
                        return;
                    }
                    var events = template.data("events");
                    if (events && events[PostSuccHandler]) {
                        return;
                    }
                    var eventFunc = _LuQUID_template_DefEventFuncMap[PostSuccHandler];
                    if (eventFunc) {
                        template.bind(PostSuccHandler, eventFunc);
                    }
                }
                function initialConfigArea(Head) {
                    if (0 == $("._LuQUID_CONFIG_OBJID", Head).length) {
                        return;
                    }
                    var OBJID = [];
                    var OBJDOMs = $("._LuQUID_CONFIG_OBJID>li", Head);
                    OBJDOMs.each(function () {
                        var identity = $(this).text();
                        OBJID.push(identity);
                    });
                    var isMultiInst = $(".maxInstNum", Head).val();
                    consoleLog("isMultiInst=" + isMultiInst);
                    Head.succfunction = function (data) {
                        Head.hasError(data, "externErrorHint");
                        {
                            Head.trigger("changeXMLDataBeforeFillData", [data]);
                            var XMLOBJ = $(data).find(OBJID[0]);
                            var RuleNum = $("Instance", XMLOBJ).length;
                            if (isMultiInst == 0) {
                                Head.fillDataByOBJID(data, OBJID, Head, 0);
                                Head.InstantializeForTemplateBox(data, OBJID, Head);
                                var template = $("[id^='template_']", Head);
                                template.trigger("fillDataByCustom", [0, template]);
                                template.showIt(true);
                            }
                            else {
                                Head.fillDataByCustom = undefined;
                                Head.createPageDataByClone(RuleNum, OBJID, data,
                                    Head.fillDataByCustom);
                            }
                        }
                    };
                    if ($(".collapBarWithDataTrans", Head).length <= 0) {
                        Head.dataTransfer(ServerAddr,
                            "GET",
                            Head.succfunction);
                    }
                    else {
                        initial_collapBarWithDataTrans(Head);
                    }
                }
                function initial_QueryAccessDeviceLink() {
                    var linkSelector = "._LuQUID_SelAccessDevice";
                    var selDevLinks = $(linkSelector);
                    if (selDevLinks.length == 0) {
                        return;
                    }
                    selDevLinks.each(function () {
                        var selDevLink = $(this);
                        selDevLink.css("display", "block");
                        var rowObj = selDevLink.parents(".row").eq(0);
                        rowObj.append("<div class='clear'></div>");
                        var macID = rowObj.find(".mac").eq(0).attr("id");
                        var macIDStriped = macID;
                        var paraID = macIDStriped.match(/^sub_(.+)\d$/)[1];
                        var headID = selDevLink.parents(".HeadDIV").attr("id");
                        var suffix = ":" + paraID + ":" + headID;
                        var devListHTML = ''
                            + '<div class="_LuQUID_AccessDeviceList" name="_LuQUID_AccessDeviceInfo' + suffix + '" style="display:none;">'
                            + '<input type="hidden" class="PostIgnore" id="_LuQUID_InstNum' + suffix + '" value="0">'
                            + '<p id="_LuQUID_NoAccessDev' + suffix + '">Actualmente não há dispositivos associados.</p>'
                            + '<p id="_LuQUID_template_AccessDeviceInfo' + suffix + '" style="display:none">'
                            + '<label class="cfgLabel">&nbsp;</label>'
                            + '<input type="hidden" class="PostIgnore" id="_LuQUID_HostName' + suffix + '" value="">'
                            + '<input type="hidden" class="PostIgnore" id="_LuQUID_IPAddress' + suffix + '" value="">'
                            + '<input type="hidden" class="PostIgnore" id="_LuQUID_MACAddress' + suffix + '" value="">'
                            + '<input type="radio" class="PostIgnore" id="_LuQUID_AccessDeviceRadio' + suffix + '" name="_LuQUID_AccessDeviceRadio' + suffix + '" value=""/>'
                            + '<label for="_LuQUID_AccessDeviceRadio' + suffix + '">'
                            + 'Nome de anfitrião: [<span id="_LuQUID_StrHostName' + suffix + '">Desconhecido</span>]'
                            + '-Endereço MAC: [<span id="_LuQUID_StrMACAddress' + suffix + '"></span>]'
                            + '</label>'
                            + '</p>'
                            + '<a class="_LuQUID_HideAccessDevice">Ocultar</a>'
                            + '</div>';
                        var macObj = rowObj.find(".right");
                        var devListObj = $(devListHTML).insertAfter(macObj);
                        var labelObj = selDevLink.parent().prev();
                        var labelWidth = labelObj.css("width");
                        devListObj.css("margin-left", labelWidth);
                    });
                    var devRadios = $("input[name^='_LuQUID_AccessDeviceRadio']");
                    devRadios.click(function (event) {
                        var devRadio = $(this);
                        var templateSelector = "[id^='_LuQUID_template_AccessDeviceInfo']";
                        var templateDev = devRadio.parents(templateSelector);
                        var devListObj = devRadio.parents("[name^='_LuQUID_AccessDeviceInfo']");
                        var rowObj = devRadio.parents(".row").eq(0);
                        var deviceRadioSelector = "input[name^='_LuQUID_AccessDeviceRadio']";
                        $(deviceRadioSelector, devListObj).prop("checked", false);
                        devRadio.prop("checked", true);
                        var devMACObj = $("[id^='_LuQUID_MACAddress']", templateDev);
                        var macID = rowObj.find(".mac").eq(0).attr("id");
                        var macIDStriped = colonStrippingLast(macID);
                        var subID = macIDStriped.match(/^(sub_.+)\d$/)[1];
                        devMACObj.FillIPorMacDataBySplit(subID, ":", 6);
                        var lastSubMAC = rowObj.find(".mac").last();
                        lastSubMAC.focus().blur();
                    });
                    var hideDevLinks = $("._LuQUID_HideAccessDevice");
                    hideDevLinks.unbind("click");
                    hideDevLinks.click(function (event) {
                        event.preventDefault();
                        var devListObj = $(this).parents("[name^='_LuQUID_AccessDeviceInfo']");
                        devListObj.hide();
                    });
                    selDevLinks.unbind("click");
                    selDevLinks.click(function (event) {
                        event.preventDefault();
                        var selDevLink = $(this);
                        var rowObj = selDevLink.parents(".row");
                        var devListObj = rowObj.find("[name^='_LuQUID_AccessDeviceInfo']");
                        if (devListObj.is(":visible")) {
                            devListObj.hide();
                            return;
                        }
                        var InstNumBefore = $("[id^='_LuQUID_InstNum']", devListObj).val();
                        for (var i = 0; i < InstNumBefore; i++) {
                            var selector = "[id$='_" + i + "']"
                                + "[id^='_LuQUID_template_AccessDeviceInfo']";
                            $(selector, devListObj).remove();
                        }
                        devListObj.AccessDeviceXMLDealWith = function (data) {
                            devListObj.hasError(data, "externErrorHint");
                            var ACCESSDEVRuleOBJ = $(data).find("OBJ_ACCESSDEV_ID");
                            var RuleNum = $("Instance", ACCESSDEVRuleOBJ).length;
                            var OBJID = ["OBJ_ACCESSDEV_ID"];
                            var templateSelector = "[id^='_LuQUID_template_AccessDeviceInfo']";
                            var TemplateOBJ = $(templateSelector, devListObj);
                            $("[id^='_LuQUID_InstNum']", devListObj).val(RuleNum);
                            var NoAccessDevObj = $("[id^='_LuQUID_NoAccessDev']", devListObj);
                            if (RuleNum == 0) {
                                NoAccessDevObj.show();
                            }
                            else {
                                NoAccessDevObj.hide();
                            }
                            for (var i = 0; i < RuleNum; i++) {
                                var clone = TemplateOBJ.cloneWithSuffix(i);
                                TemplateOBJ.before(clone);
                                clone.fillDataByOBJID(data, OBJID, clone, i);
                                var HostNameStr = $("[id^='_LuQUID_HostName']", clone).val();
                                var IPAddress = $("[id^='_LuQUID_IPAddress']", clone).val();
                                var MACAddress = $("[id^='_LuQUID_MACAddress']", clone).val();
                                if (HostNameStr == "") {
                                    if (IPAddress != "") {
                                        HostNameStr = "PC" + IPAddress;
                                    }
                                    else if (MACAddress != "") {
                                        HostNameStr = "PC" + MACAddress;
                                    }
                                    else {
                                        HostNameStr = "Desconhecido";
                                    }
                                }
                                $("[id^='_LuQUID_StrHostName']", clone).text(HostNameStr);
                                var MACAddress = $("[id^='_LuQUID_MACAddress']", clone).val();
                                $("[id^='_LuQUID_StrMACAddress']", clone).text(MACAddress);
                                clone.show();
                            }
                            devListObj.show();
                        };
                        var accessMode = selDevLink.attr("_LuQUID_Access_Mode");
                        var AccessModeSet =
                            [
                                "ETH",
                                "WLAN",
                                "ALL"
                            ];
                        if (-1 == $.inArray(accessMode, AccessModeSet)) {
                            var devTypeList = AccessModeSet.join("/");
                            consoleLog("_LuQUID_Access_Mode must be set as one of " + devTypeList);
                            return;
                        }
                        var ServerAddr = "/?_type=hiddenData&_tag=accessdev_data&";
                        ServerAddr += "DeveiceType=" + accessMode;
                        showWaitTip(true);
                        devListObj.dataTransfer(ServerAddr,
                            "GET",
                            devListObj.AccessDeviceXMLDealWith,
                            undefined,
                            undefined,
                            false);
                    });
                }
                function InitTimeOption(start, end, ele, step, ctrlClass) {
                    var realNum = (end - start) / step;
                    for (var i = 0; i < realNum; i++) {
                        var tmp = i * step + start;
                        var tmpText = tmp;
                        if (tmp < 10) {
                            tmpText = '0' + tmpText;
                        }
                        if (i == realNum - 1
                            && (ctrlClass == "group_HourEnd" || ctrlClass == "group_MinuteEnd")) {
                            ele.append("<option value='" + tmp + "' selected='selected'>" + tmpText + "</option>");
                        }
                        else {
                            ele.append("<option value='" + tmp + "'>" + tmpText + "</option>");
                        }
                    }
                }
                function initial_TimeCtl() {
                    var TimeCtl = $("._LuQUID_TimeCtl");
                    if (TimeCtl.length <= 0) {
                        return;
                    }
                    var timeArr = {
                        "group_HourStart": [0, 24],
                        "group_MinuteStart": [0, 60],
                        "group_HourEnd": [0, 24],
                        "group_MinuteEnd": [0, 60]
                    };
                    for (var tmp in timeArr) {
                        var timeEle = $("." + tmp, TimeCtl);
                        var start = timeArr[tmp][0];
                        var end = timeArr[tmp][1];
                        InitTimeOption(start, end, timeEle, 1, tmp);
                    }
                }
                function Second2DHMS(num) {
                    var s = num % 60;
                    num = parseInt(num / 60);
                    var m = num % 60;
                    num = parseInt(num / 60);
                    var h = num % 24;
                    num = parseInt(num / 24);
                    var d = num;
                    return {
                        day: d,
                        hour: h,
                        minute: m,
                        second: s
                    };
                }
                function InitSelectByIntRange(selectObj, min, max) {
                    selectObj.empty();
                    var domCache = [];
                    for (var i = min; i <= max; i++) {
                        domCache.push("<option title='" + i + "' value='" + i + "'>" + i + "</option>");
                    }
                    selectObj.append(domCache.join());
                }
                function SetCookie(name, value) {
                    var Days = 30;
                    var exp = new Date();
                    exp.setTime(exp.getTime() + Days * 24 * 60 * 60 * 1000);
                    document.cookie = name + "=" + escape(value)
                        + ";expires=" + exp.toGMTString();
                }
                function getCookie(name) {
                    var arr = document.cookie.match(new RegExp("(^| )" + name + "=([^;]*)(;|$)"));
                    if (arr != null) {
                        return unescape(arr[2]);
                    }
                    return null;
                }
                function delCookie(name) {
                    var exp = new Date();
                    exp.setTime(exp.getTime() - 1);
                    var cval = getCookie(name);
                    if (cval != null) {
                        document.cookie = name + "=" + cval + ";expires=" + exp.toGMTString();
                    }
                }
                function IsBrowserSupportCookie() {
                    var support = false;
                    SetCookie('cookie_test', '1');
                    var cookie_test = getCookie('cookie_test');
                    if ('1' == cookie_test) {
                        support = true;
                    }
                    delCookie('cookie_test');
                    return support;
                }
                (function () {
                    var setTimeout_context_binding = function (vCallback, nDelay) {
                        var oThis = this, aArgs = Array.prototype.slice.call(arguments, 2);
                        return window.setTimeout(vCallback instanceof Function ? function () {
                            vCallback.apply(oThis, aArgs);
                        } : vCallback, nDelay);
                    };
                    var setInterval_context_binding = function (vCallback, nDelay) {
                        var oThis = this, aArgs = Array.prototype.slice.call(arguments, 2);
                        return window.setInterval(vCallback instanceof Function ? function () {
                            vCallback.apply(oThis, aArgs);
                        } : vCallback, nDelay);
                    };
                    var timer = function (fnAlarm, options) {
                        this.fnAlarm_inner = undefined;
                        this.timeout = undefined;
                        this.interval = undefined;
                        this.contextDom = undefined;
                        this.timerHandle;
                        if (fnAlarm) {
                            this.fnAlarm_inner = fnAlarm;
                        }
                        else {
                            return;
                        }
                        if (options) {
                            if (options.timeout) {
                                this.timeout = options.timeout;
                            }
                            if (options.interval) {
                                this.interval = options.interval;
                            }
                            if (options.contextDom) {
                                this.contextDom = options.contextDom;
                            }
                        }
                        if (!(this.timeout || options.interval)) {
                            return;
                        }
                    };
                    timer.prototype.start = function () {
                        var context_binding_timer = undefined;
                        var time_value = undefined;
                        if (this.timeout) {
                            context_binding_timer = setTimeout_context_binding;
                            time_value = this.timeout;
                        }
                        else if (this.interval) {
                            context_binding_timer = setInterval_context_binding;
                            time_value = this.interval;
                        }
                        else {
                            return;
                        }
                        this.timerHandle = context_binding_timer.call(this, function () {
                            if (this.contextDom && !document.body.contains(this.contextDom)) {
                                this.stop();
                                return;
                            }
                            this.fnAlarm_inner.call(this);
                        }, time_value);
                    };
                    timer.prototype.stop = function () {
                        if (this.timeout) {
                            clearTimeout(this.timerHandle);
                        } else {
                            clearInterval(this.timerHandle);
                        }
                        delete this.timerHandle;
                    };
                    timer.prototype.getTimerID = function () {
                        return this.timerHandle;
                    };
                    window.ContextBindingTimer = timer;
                })();
                (function ($) {
                    var o = $({});
                    var modifier = $({});
                    $.subscribe = function () {
                        o.on.apply(o, arguments);
                    };
                    $.unsubscribe = function () {
                        o.off.apply(o, arguments);
                    };
                    $.publish = function () {
                        o.trigger.apply(o, arguments);
                    };
                    $.addModifier = function (modifierName, callFunc) {
                        modifier[modifierName] = callFunc;
                    };
                    $.callModifier = function (modifierName, data) {
                        if (modifier[modifierName] == undefined) {
                            return;
                        }
                        var callFunc = modifier[modifierName];
                        callFunc(data);
                    };
                }(jQuery));
                function timeTranslate(timeString) {
                    var timetempstr = timeString;
                    if (timeString != "") {
                        var dayTranslat = {
                            "Sun": "Dom",
                            "Mon": "Seg",
                            "Tue": "Ter",
                            "Wed": "Qua",
                            "Thu": "Qui",
                            "Fri": "Sex",
                            "Sat": "Sab"
                        };
                        var MonTranslat = {
                            "Jan": "Jan",
                            "Feb": "Fev",
                            "Mar": "Mar",
                            "Apr": "Abr",
                            "May": "Mai",
                            "Jun": "Jun",
                            "Jul": "Jul",
                            "Aug": "Ago",
                            "Sep": "Set",
                            "Oct": "Out",
                            "Nov": "Nov",
                            "Dec": "Dez"
                        };
                        var timeArry = timeString.split(",");
                        if (timeArry.length > 1) {
                            var datstr = timeArry[0];
                            var monstr = timeArry[1];
                            timeArry[0] = dayTranslat[datstr];
                            timeArry[1] = MonTranslat[monstr];
                        }
                        timetempstr = timeArry.join(",");
                    }
                    return timetempstr;
                }
                function getPwdLevel(val, relVal) {
                    if (val.length < 8) {
                        return false;
                    }
                    if (!(/[0-9]+/).test(val) ||
                        !(/[a-zA-Z]+/).test(val) ||
                        !(/[!"#$%&'()*+,-./:;<=>?@\[\\\]^_`{|}~]+/).test(val)) {
                        return false;
                    }
                    if (val == relVal || val == relVal.split("").reverse().join("")) {
                        return false;
                    }
                    return true;
                }
                function CheckPwdStrengthClass(pwdId, relativeId, templateId, customRuleFunc, customTip) {
                    this.pwdObj = $("[id^=" + pwdId + "]", $("#" + templateId));
                    this.checkStrength = function (o, v) {
                        var r = {
                            txt: "Fraco",
                            aClass: "redFont"
                        };
                        if (typeof (customRuleFunc) == "function") {
                            return customRuleFunc(v);
                        }
                        var myTplt = o.closest("[id^=template_]");
                        var relVal = $("[id^=" + relativeId + "]", myTplt).val();
                        var strongPwd = getPwdLevel(v, relVal);
                        if (strongPwd) {
                            r.txt = "";
                        }
                        return r;
                    };
                    this.showResult = function (o, r) {
                        var inputParent = o.parent();
                        inputParent.find(".__CheckPwdStrength").remove();
                        if (r.txt != "") {
                            inputParent.append("<span class='__CheckPwdStrength " + r.aClass + "'>" + r.txt + "</span>");
                        }
                    };
                    this.showTip = function (o) {
                        var tip = "Uma senha forte deve coincidir com estas regras: <br/> 1. Ela deve ter pelo menos 8 caracteres. <br/> 2. Deve ser composto por dígitos, alfabeto e símbolos especiais. <br/> 3. Ele não deve ter relação contexto com o nome de utilizador, tal como o mesmo ou inversa. ";
                        if (typeof (customTip) == "string") {
                            tip = customTip;
                        }
                        if (tip.length > 0) {
                            var area = o.closest(".formTbl");
                            if (area.find(".__CheckPwdStrengthTip").length < 1) {
                                area.prepend("<div class='staticInfoHint __CheckPwdStrengthTip'><p>" + tip + "</p></div>");
                            }
                        }
                        $("#dynamicTip").remove();
                        o.trigger("focus.dTip");
                    };
                    var theCPSObj = this;
                    this.pwdObj.bind("keyup.pwdStrength", function () {
                        var v = $(this).val();
                        var r = theCPSObj.checkStrength($(this), v);
                        theCPSObj.showResult($(this), r);
                    }).bind("focus.pwdStrength", function () {
                        theCPSObj.showTip($(this));
                    });
                }
                function wlanDisableControl(funcID) {
                    if (ssidConf.disable != undefined) {
                        if (ssidConf.disable == "all" || ssidConf.disable.indexOf(funcID) != -1) {
                            var Head = $("#" + funcID);
                            Head.find("input[id!=''],select[id!='']").attr("disabled", "disabled");
                            Head.find(".Button").addClass("disableBtn");
                            Head.find(".instDelete,.instNew").off("click");
                        }
                    }
                }
                function speed_change_auto(accessType, speeddata) {
                    var speeddata = parseInt(speeddata);
                    if (accessType === 'wlan') {
                        if (speeddata < 1000) {
                            speeddata = Number(speeddata).toFixed(0) + 'Kbps ';
                        } else if (speeddata >= 1000 && speeddata < 1000000) {
                            speeddata = Number(speeddata / 1000).toFixed(0) + 'Mbps ';
                        } else if (speeddata >= 1000000) {
                            speeddata = Number(speeddata / 1000 / 1000).toFixed(0) + 'Gbps ';
                        }
                    } else if (accessType === 'eth') {
                        if (speeddata < 1000) {
                            speeddata = speeddata + 'bps ';
                        } else if (speeddata >= 1000 && speeddata < 1000000) {
                            speeddata = Number(speeddata / 1000).toFixed(0) + 'Kbps ';
                        } else if (speeddata >= 1000000) {
                            speeddata = Number(speeddata / 1000 / 1000).toFixed(0) + 'Mbps ';
                        }
                    }
                    return speeddata;
                }
                function bps_speed_change_auto(speeddata) {
                    var speeddata = parseInt(speeddata);
                    if (speeddata < 1000) {
                        speeddata = Number(speeddata).toFixed(0) + 'bps ';
                    } else if (speeddata >= 1000 && speeddata < 1000000) {
                        speeddata = Number(speeddata / 1000).toFixed(0) + 'Kbps ';
                    } else if (speeddata >= 1000000) {
                        speeddata = Number(speeddata / 1000 / 1000).toFixed(0) + 'Mbps ';
                    }
                    return speeddata;
                }

            </script>
            <script type="text/javascript">
                $(document).ready(function () {
                    initial_sceneTip();
                    initial_CollapsibleBar();
                    initial_addInstLink();
                    initial_QueryAccessDeviceLink();
                    initial_TimeCtl();
                    $(".HeadDIV").each(function () {
                        var Head = $(this);
                        var HeadID = Head.attr("id");
                        var template = $("#template_" + HeadID, Head);
                        var formOBJ = $("form", Head);
                        if (!formOBJ.attr("onsubmit")) {
                            formOBJ.attr("onsubmit", "return false;");
                        }
                        var stopFormAutoSubmitStr = "<input type='text' id='_stopFormAutoSubmit'"
                            + " value='' class='PostIgnore'"
                            + " style='display:none;'>";
                        formOBJ.prepend(stopFormAutoSubmitStr);
                        initial_button("Apply", Head);
                        initial_button("Cancel", Head);
                        initial_button("Delete", Head);
                        initialCtrlAllLink(Head);
                        initial_special_password(Head);
                        var collapsibleInstObj = $(".collapsibleInst", template);
                        collapsibleInstObj.unbind("click");
                        collapsibleInstObj.click(function (event) {
                            var collapsibleInst = $(this);
                            var template = collapsibleInst.parents("[id^='template_']");
                            var ChangeArea = $(".ChangeArea", template);
                            if (ChangeArea.is(":hidden")) {
                                ChangeArea.showIt(true);
                                collapsibleInst.addClass("instNameExp");
                            }
                            else {
                                ChangeArea.showIt(false);
                                collapsibleInst.removeClass("instNameExp");
                                $(".Btn_cancel", ChangeArea).click();
                            }
                        });
                        $(".utf8Compatible", template).each(function () {
                            var thisObj = $(this);
                            var dTip = thisObj.text();
                            var dTipArr = dTip.split("");
                            var firstNum = "";
                            var secNum = "";
                            var firstNumStart = "";
                            var firstNumEnd = "";
                            var secNumStart = "";
                            var secNumEnd = "";
                            var Nums = 0;
                            var newTip = "";
                            dTipArr = $.grep(dTipArr, function (n, i) {
                                return n != " ";
                            });
                            dTip = dTipArr.join("");
                            for (var i = 0; i < dTipArr.length; i++) {
                                if (Nums > 2) {
                                    thisObj.remove();
                                    break;
                                }
                                if (isNaN(dTipArr[i]) == false) {
                                    if (firstNumStart == "") {
                                        firstNumStart = i;
                                        firstNumEnd = parseInt(i) + 1;
                                        Nums += 1;
                                    }
                                    else {
                                        if (secNumStart == "") {
                                            if (firstNumEnd == i) {
                                                firstNumEnd = parseInt(i) + 1;
                                            }
                                            else {
                                                secNumStart = i;
                                                secNumEnd = parseInt(i) + 1;
                                                Nums += 1;
                                            }
                                        }
                                        else {
                                            if (secNumEnd == i) {
                                                secNumEnd = parseInt(i) + 1;
                                            }
                                            else {
                                                Nums = 3;
                                            }
                                        }
                                    }
                                }
                            }
                            if (firstNumStart != "" && secNumStart != "") {
                                firstNum = dTip.slice(firstNumStart, firstNumEnd);
                                secNum = dTip.slice(secNumStart, secNumEnd);
                                newTip = dTip.slice(0, firstNumStart) + " ";
                                if (parseInt(secNum) < 3) {
                                    var prevObjId = thisObj.prev().attr("id");
                                    alert("Element[id='" + prevObjId + "']'s length range [" + firstNum + "," + secNum + "] will be invalid after utf-8 transforming!");
                                }
                                else {
                                    firstNum = Math.ceil(parseInt(firstNum) / 3);
                                    secNum = Math.floor(parseInt(secNum) / 3);
                                    if (firstNum < secNum) {
                                        firstNum = reformString(firstNum.toString(), 3);
                                        secNum = reformString(secNum.toString(), 3);
                                        newTip += firstNum + " ~ " + secNum;;
                                    }
                                    else if (firstNum == secNum) {
                                        secNum = reformString(secNum.toString(), 3);
                                        newTip += secNum;
                                    }
                                    else {
                                        var prevObjId = thisObj.prev().attr("id");
                                        alert("Element[id='" + prevObjId + "']'s length range [" + firstNum + "," + secNum + "] is invalid after utf-8 transforming!");
                                    }
                                }
                            }
                            else {
                                thisObj.remove();
                            }
                            if (newTip != "") {
                                thisObj.text(newTip);
                            }
                        });
                        template.on("focus.dTip", "input[type='text'],input[type='password']", function () {
                            var thisObj = $(this);
                            if (thisObj.attr("readonly")) {
                                return;
                            }
                            var msg = thisObj.next("span").not(".__CheckPwdStrength").text();
                            if (msg != "") {
                                var pos = thisObj.offset();
                                var objWidth = thisObj.width();
                                var dhtml = "<div id='dynamicTip'><div id='dTip_l'></div>"
                                    + "<div id='dTip_m'>"
                                    + msg
                                    + "</div><div id='dTip_r'></div></div>";
                                var dtObj = $(dhtml).css({ top: (pos.top - 33) + 'px', left: (pos.left + objWidth + 8) + 'px' });
                                dtObj.appendTo('body').fadeIn(400);
                                thisObj.bind("blur.dTip", function () {
                                    dtObj.remove();
                                });
                            }
                            var fObj = $(":focus");
                            var tObj = $("#dynamicTip");
                            if ((tObj.length > 0) && (fObj.attr("id") != thisObj.attr("id"))) {
                                tObj.remove();
                            }
                        });
                        $("input.ip,input.mac", template).each(function () {
                            var InputOBJ = $(this);
                            InputOBJ.unbind("keydown");
                            InputOBJ.unbind("keyup");
                            InputOBJ.keydown(function (event) {
                                autoJumpBack(this, this.value, event);
                            });
                            InputOBJ.keyup(function (event) {
                                FocusAutoJump(this, this.value, event);
                            });
                        });
                        $(".instSwitch input", template).each(function () {
                            var InputOBJ = $(this);
                            if (InputOBJ.attr("type") == "radio") {
                                InputOBJ.unbind("change");
                                InputOBJ.change(function (event) {
                                    var template = $(this).parents("[id^='template_']");
                                    var ChangeArea = $(".ChangeArea", template);
                                    var _InstIDName = "_InstID";
                                    var _InstIDValue = template.find("[id^='_InstID']").val();
                                    var luquidObjUl = $("._LuQUID_CONFIG_OBJID", Head);
                                    var objId = $("li", luquidObjUl).eq(0).text();
                                    if (_InstIDValue == undefined) {
                                        var instId = objId + "\\._OBJ_InstID";
                                        _InstIDValue = $("[id^='" + instId + "']", template).val();
                                        _InstIDName = objId + "._OBJ_InstID";
                                    }
                                    if (ChangeArea.is(":hidden")
                                        && _InstIDValue != "-1") {
                                        var ServerAddr = template.parents(".HeadDIV").find("address span").text();
                                        var instSwitchName = colonStripping(InputOBJ.attr("name"));
                                        var instSwitchValue = InputOBJ.val();
                                        var PostData = "IF_ACTION=Apply" + "&"
                                            + instSwitchName + "=" + instSwitchValue + "&"
                                            + _InstIDName + "=" + _InstIDValue;
                                        var actionType = "InstSwitch";
                                        var PostSuccHandler = "fillDataByInstSwitchResult";
                                        dataPost(actionType, PostSuccHandler, ServerAddr, template, PostData);
                                    }
                                });
                            }
                        });
                        template.unbind("fillDataByInstSwitchResult");
                        template.bind("fillDataByInstSwitchResult", function (event, xml, template) {
                            if (template.hasError(xml) == 0) {
                                return;
                            }
                            $(".ChangeArea", template).showIt(true);
                            $(".collapsibleInst", template).addClass("instNameExp");
                        });
                        template.unbind("fillDataByDeleteResult");
                        template.bind("fillDataByDeleteResult", function (event, xml, template) {
                            if (template.hasError(xml) == 0) {
                                template.remove();
                            }
                            else {
                                $(".ChangeArea", template).showIt(true);
                            }
                        });
                        initialStatusArea(Head);
                        initialConfigArea(Head);
                    });
                    $("[id^='AreaHideAttr']").each(function () {
                        var HideAttr = $(this);
                        var HeadID = $(this).next().next().attr("id") || $(this).next().attr("id");
                        var template = $("#template_" + HeadID);
                        if (HideAttr.html() == 4) {
                            template.find("*").attr("disabled", true).attr("hideattr", true);
                            $("[class^='Button']", template).addClass("disableBtn");
                            $("[class^='longBtn']", template).addClass("disableBtn");
                            $("[class^='instDelete Btn_delete']").remove();
                            $("[class^='addInstBar AddContentContainer']").remove();
                            $("[id^='Btn_cancel_'],[id^='Btn_apply_']", template).unbind();
                            $("[class^='Button Btn_refresh']").removeClass("disableBtn").attr("disabled", false);
                        }
                    });
                });
            </script>

            <link
                rel="stylesheet"
                type="text/css"
                href="css/login.css"
            />
            <style>
                .logo_OJO {
                    width: 300px;
                    height: 72px;
                    float: left;
                    background: url(../img/Logo_OJO.png) no-repeat 5px 15px;
                }

                .logo_Claro {
                    width: 110px;
                    height: 72px;
                    float: left;
                    background: url(../img/Logo_Claro.png) no-repeat 5px 30px;
                }

                .logo_Antel {
                    width: 110px;
                    height: 72px;
                    float: left;
                    background: url(../img/Logo_Antel.png) no-repeat 5px 30px;
                }

                .logo_Tot {
                    width: 160px;
                    background: url(../img/Logo_Tot.png) no-repeat 5px 30px;
                }

                .timeArea_Tot {
                    left: 190px;
                }

                .logo_Morocco {
                    background: url(../img/Logo_Morocco.png) no-repeat 5px 30px;
                }

                .logo_IvoryOrange {
                    background: url(../img/Logo_IvoryOrange.png) no-repeat 5px 30px;
                }

                .logo_KAMA_Orange {
                    width: 300px;
                    height: 72px;
                    float: left;
                    background: url(../img/Logo_OMA.png) no-repeat 5px 15px;
                }

                .color_OMA {
                    color: #FF6600 !important;
                }

                .logo_Orange {
                    background: url(../img/Logo_Orange.png) no-repeat 5px 30px;
                }

                .logo_KAMA_Orange {
                    width: 300px;
                    height: 72px;
                    float: left;
                    background: url(../img/Logo_OMA.png) no-repeat 5px 15px;
                }

                .color_OMA {
                    color: #FF6600 !important;
                }

                .logo_CTC {
                    width: 190px;
                    height: 72px;
                    float: left;
                    background: url(../img/Logo_CTC.jpg) no-repeat 5px 40px;
                }

                .timeArea_CTC {
                    left: 200px;
                }

                .loginTitle_CTC {
                    padding-left: 0px !important;
                }

                .logo_Tarr {
                    width: 110px;
                    height: 72px;
                    float: left;
                    background: url(../img/Logo_Tarr.png) no-repeat 5px 30px;
                }

                .logo_OMA {
                    width: 300px;
                    height: 72px;
                    float: left;
                    background: url(../img/Logo_OMA.png) no-repeat 5px 15px;
                }

                .color_OMA {
                    color: #FF6600 !important;
                }

                .logo_OMA {
                    width: 300px;
                    height: 72px;
                    float: left;
                    background: url(../img/Logo_OMA.png) no-repeat 5px 15px;
                }

                .logoPTCL {
                    width: 110px;
                    height: 72px;
                    float: left;
                    background: url(../img/Logo_PTCL.png) no-repeat -27px -5px;
                    background-size: 165px 115px;
                }
            </style>
            <div id="loginWrapper">
                <div class="emFont loginTitle">Bem-vindo
                    a&#70;&#54;&#55;&#48;&#76;. Por favor entre. </div>
                <div
                    id="loginContainer"
                    class="loginContainer"
                >
                    <input
                        type="hidden"
                        name="_sessionTOKEN"
                        id="_sessionTOKEN"
                        value=""
                    />
                    <div class="loginInstCfgArea">
                        <div class="row">
                            <label
                                for="Frm_Username"
                                class="left w120"
                            >Usuário</label>
                            <div class="right">
                                <input
                                    type="text"
                                    name="Frm_Username"
                                    id="Frm_Username"
                                    autocomplete="new-password"
                                    class="w180"
                                    value=""
                                />
                            </div>
                        </div>
                        <div class="row">
                            <label
                                for="Frm_Password"
                                class="left w120"
                            >Senha</label>
                            <div class="right">
                                <input
                                    type="password"
                                    name="Frm_Password"
                                    id="Frm_Password"
                                    autocomplete="new-password"
                                    class="w180 passInvisible"
                                    value=""
                                />
                            </div>
                        </div>
                        <div
                            id="login_error"
                            class="errorHint"
                            style="display:none;"
                        >
                            <span id="login_error_span"></span>
                            <span
                                id="login_error_waittime"
                                value="0"
                            ></span>
                        </div>
                    </div>
                </div>
                <div
                    id="loginBtn"
                    class=""
                >
                    <input
                        type="submit"
                        id="LoginId"
                        class="button login"
                        value="Entrar"
                    />
                </div>
            </div>

            <div style="clear:left;height:1px;">&nbsp;</div>
        </div>
        <div id="page_footer">

            <span id="copyRight">&copy;2008-&#50;&#48;&#50;&#49; ZTE
                Corporation. Todos os direitos
                reservados</span>&nbsp;&nbsp;|&nbsp;&nbsp;

            <span id="pdtVer">&#70;&#54;&#55;&#48;&#76;</span>

        </div>
    </div>
    <script type="text/javascript">
        function LanguageSwitch(nowLanguage) {
            var changeLanguage = "";
            if ("English" == nowLanguage) {
                changeLanguage = "Portuguese";
            }
            else {
                changeLanguage = "English";
            }
            showWaitTip(true);
            $.post("/?_type=hiddenData&_tag=switchlang_entry", { IF_LanguageSwitch: changeLanguage }, undefined, "json")
                .done(function (data) {
                    if (data.need_refresh) {
                        top.location.href = top.location.href;
                    }
                });
        }
        function MenuModeSwitch(ModeNow) {
            var ChangeModeSwitch = "";
            if ("Basic" == ModeNow) {
                ChangeModeSwitch = "Advanced";
            }
            else {
                ChangeModeSwitch = "Basic";
            }
            showWaitTip(true);
            $.post("/?_type=loginData&_tag=modeswitch_entry", { IF_ModeSwitch: ChangeModeSwitch }, undefined, "json")
                .done(function (data) {
                    if (data.need_refresh) {
                        top.location.href = top.location.href;
                    }
                });
        }
        var UpdateTimeTimerID;
        function UpdateCurrTime() {
            var CurrTimeObj = $("#_DevCurrTime");
            var CurrTimeDiv = $("#timeArea");
            CurrTimeObj.succfunction = function (xml) {
                if (CurrTimeDiv.hasError(xml, "_noExist") == 0) {
                    var currTimeByXML = "";
                    $(xml).find('ParaName').each(function () {
                        var tmp = $(this);
                        if (tmp.text() == "CurrentLocalTime") {
                            currTimeByXML = tmp.next().text();
                            return false;
                        }
                    });
                    if (typeof (customTimeStyle) == "function") {
                        customTimeStyle(CurrTimeObj, currTimeByXML, "template");
                    }
                    else {
                        var timeStr = timeTranslate(currTimeByXML);
                        if (currTimeByXML != "") {
                            var SecTimeLocation = currTimeByXML.lastIndexOf(":");
                            var currTimeNotSec = currTimeByXML.substring(0, SecTimeLocation);
                            CurrTimeObj.text(currTimeNotSec);
                        }
                    }
                }
            };
            CurrTimeObj.failfunction = function (xml) {
            };
            CurrTimeObj.dataTransfer("/?_type=hiddenData&_tag=sntp_data",
                "GET",
                CurrTimeObj.succfunction,
                CurrTimeObj.failfunction,
                false);
            UpdateTimeTimerID = setTimeout("UpdateCurrTime()", 30 * 1000);
        }
        $(document).ready(function () {

            FakeClass1MenuShow();

            clearTimeout(UpdateTimeTimerID);
            var NowStatus = "\x73\x68\x6f\x77\x6c\x6f\x67\x69\x6e\x50\x61\x67\x65";
            var IsShowTimeZone = {
                'showloginPage': false,
                'showWizardPage': true,
                'showCommonPage': true
            };
            if (!IsShowTimeZone[NowStatus]) {
                $("#timeArea").hide();
            }
            else {
                $("#timeArea").show();
                UpdateCurrTime();
            }

            var logoLink = "homePage";
            var IsShowlogOff = {
                'showloginPage': false,
                'showWizardPage': false,
                'showCommonPage': true
            };
            if (!IsShowlogOff[NowStatus]) {
                $("#logOff").hide();
            }
            else {
                var obj = $("#logo");
                obj.addClass("clickable");
                obj.click(function () {
                    openLink(logoLink + "&Menu3Location=0");
                });
            }
            var modeSwitchAction = {
                'showloginPage': null,
                'showWizardPage': null,
                'showCommonPage': MenuModeSwitch
            };
            if (4 == 1 || 4 == 4) {
                modeSwitchAction.showCommonPage = null;
            }
            if (modeSwitchAction[NowStatus] != null) {
                var modeSwitchButContent = "\x41\x64\x76\x61\x6e\x63\x65\x64";
                var modeOBJ = $("#modeSwitch");
                var modeBasic = $("#modeBisic", modeOBJ);
                var ModeAdvanced = $("#ModeAdvanced", modeOBJ);
                if (modeSwitchButContent == "Basic") {
                    ModeAdvanced.attr("class", "emColor clickable");
                    modeBasic.attr("class", "");
                }
                else if (modeSwitchButContent == "Advanced") {
                    modeBasic.attr("class", "emColor clickable");
                    ModeAdvanced.attr("class", "");
                }
                else {
                }
            }
            $("span", modeOBJ).each(function () {
                var tempOBJ = $(this);
                tempOBJ.click(function () {
                    if (!$(this).hasClass("clickable")
                        || modeSwitchAction[NowStatus] == null) {
                        return;
                    }
                    var ModeNow = "\x41\x64\x76\x61\x6e\x63\x65\x64";
                    MenuModeSwitch(ModeNow);
                });
            });
            var languageButContent = "\x50\x6f\x72\x74\x75\x67\x75\x65\x73\x65";
            var languageOBJ = $("#languageSwitch");
            var languageEnglishOBJ = $("#EnglishModify", languageOBJ);
            var languageChineseOBJ = $("#" + "PortugueseModify", languageOBJ);
            if (languageButContent == "English") {
                languageEnglishOBJ.attr("src", "/img/English_s.gif");
                languageChineseOBJ.attr("src", "/img/Portuguese.gif");
                languageChineseOBJ.addClass("clickable");
            }
            else if (languageButContent == "Chinese") {
                languageEnglishOBJ.attr("src", "/img/English.gif");
                languageEnglishOBJ.addClass("clickable");
                languageChineseOBJ.attr("src", "/img/Chinese_s.gif");
            }
            else if (languageButContent == "Spanish") {
                languageEnglishOBJ.attr("src", "/img/English.gif");
                languageEnglishOBJ.addClass("clickable");
                languageChineseOBJ.attr("src", "/img/Spanish_s.gif");
            }
            else if (languageButContent == "Japanese") {
                languageEnglishOBJ.attr("src", "/img/English.gif");
                languageEnglishOBJ.addClass("clickable");
                languageChineseOBJ.attr("src", "/img/Japanese_s.gif");
            }
            else if (languageButContent == "Portuguese") {
                languageEnglishOBJ.attr("src", "/img/English.gif");
                languageEnglishOBJ.addClass("clickable");
                languageChineseOBJ.attr("src", "/img/Portuguese_s.gif");
            } else if (languageButContent == "French") {
                languageEnglishOBJ.attr("src", "/img/English.gif");
                languageEnglishOBJ.addClass("clickable");
                languageChineseOBJ.attr("src", "/img/French_s.gif");
            } else if (languageButContent == "Russian") {
                languageEnglishOBJ.attr("src", "/img/English.gif");
                languageEnglishOBJ.addClass("clickable");
                languageChineseOBJ.attr("src", "/img/Russian_s.gif");
            }
            else {
            }
            $("img", languageOBJ).each(function () {
                var LanguageModifyOBJ = $(this);
                LanguageModifyOBJ.click(function () {
                    if (!$(this).hasClass("clickable")) {
                        return;
                    }
                    var LanguageNow = "\x50\x6f\x72\x74\x75\x67\x75\x65\x73\x65";
                    LanguageSwitch(LanguageNow);
                });
            });
            try {
                if ((templateModify != undefined) && (typeof (templateModify) == "function")) {
                    templateModify();
                }
            } catch (e) {
            }
        });
        window.onresize = function () {
            if ($("#tipLayer").css("display") != "none") {
                reposition_box("tipLayer");
                consoleLog("window reseze!");
            }
        }
    </script>
</body>

</html>